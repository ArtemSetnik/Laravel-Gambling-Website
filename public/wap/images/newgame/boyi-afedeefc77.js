!function(){"use strict";var e={_bindEvents:function(){var e=this;return _.isEmpty(this.actions)||_.each(this.actions,function(t){_.indexOf(["scroll","submit","unload"],t[1])!==-1?$(t[0]).off(t[1],e[t[2]]).on(t[1],{context:e},e[t[2]]):$("body").off(t[1],t[0],e[t[2]]).on(t[1],t[0],{context:e},e[t[2]])}),this}};_.Class("Pt.Core.BindTrait",e)}(),function(e){Pt.Hash="1500883558541";var t="/api/v2/",n="/api/v1/",r="/:lang/api/v1/operator/:oId/",o="/cms/api/v2/",s="/cms/api/v3/",a=t+"members/:memberCode/",i=n+"members/:memberCode/",l="/cms/payment-configs/",c=t+"deposits/:methodId/",u={tokenKey:"pt_token",templates:{web:"web-1500883558541.json",funds:"funds-1500883558541.json",profile:"profile-1500883558541.json"},maintenance_keys:{deposit:"DPM",withdrawal:"WPM","fund-transfer":"FTM",rebate:"RSM"},clubs:{ctxm:"ctxm",ttg:"ttg",gpi:"gpi",mgs:"mgs",png:"png",pt:"pt",isoftbet:"isoftbet",gspot:"gspot",betsoft:"betsoft",qtech:"qtech",uc8:"uc8",pplay:"pplay"},clubNames:[{key:"ctxm",title:_.trans("games.crescendo"),link:"/slots/ctxm",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-ctxm.jpg"},{key:"ttg",title:_.trans("games.apollo"),link:"/slots/ttg",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-ttg.jpg"},{key:"betsoft",title:_.trans("games.betsoft"),link:"/slots/betsoft",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-betsoft.jpg"},{key:"gpi",title:_.trans("games.bravado"),link:"/slots/gpi",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-gpi.jpg"},{key:"mgs",title:_.trans("games.massimo"),link:"/slots/mgs",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-mgs.jpg"},{key:"png",title:_.trans("games.png"),link:"/slots/png",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-png.jpg"},{key:"pt",title:_.trans("games.palazzo"),link:"/slots/pt",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-pt.jpg"},{key:"isoftbet",title:_.trans("games.isoftbet"),link:"/slots/isoftbet",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-isoftbet.jpg"},{key:"gspot",title:_.trans("games.gspot"),link:"/slots/gspot",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-gspot.jpg"},{key:"qtech",title:_.trans("games.qtech"),link:"/slots/qtech",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-qtech.jpg"},{key:"uc8",title:_.trans("games.uc8"),link:"/slots/uc8",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-uc8.jpg"},{key:"pplay",title:_.trans("games.pplay"),link:"/slots/pplay",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/slots/slot-pplay.jpg"}],sports:[{title:_.trans("games.esports_asian"),extraClass:"",link:"/launcher/esports/asian/real",image:"/assets/images/"+Pt.Settings.app+"/sports/:lang/asian.jpg"},{title:_.trans("games.esports_euro"),extraClass:"text-right",link:"/launcher/esports/euro/real",image:"/assets/images/"+Pt.Settings.app+"/sports/:lang/european.jpg"}],casino:[{key:"gpi_casino_premiere",extraClass:"",deviceSupport:["android"],title:_.trans("games.gpi_casino_premiere"),desc:_.trans("games.gpi_casino_premiere_desc"),link:"/casino/gpi-premiere",image:"/assets/images/"+Pt.Settings.app+"/casino/gpi-premiere.jpg?hash="+Pt.Hash},{key:"gpi_casino",extraClass:"",deviceSupport:["android"],title:_.trans("games.gpi_casino"),desc:_.trans("games.gpi_casino_desc"),link:"/casino/gpi",image:"/assets/images/"+Pt.Settings.app+"/casino/gpi-casino.jpg?hash="+Pt.Hash},{key:"palazzo_casino",extraClass:"",deviceSupport:["android"],title:_.trans("games.palazzo_casino"),desc:_.trans("games.palazzo_casino_desc"),link:"/casino/pt",image:"/assets/images/"+Pt.Settings.app+"/casino/pt-casino.jpg?hash="+Pt.Hash}],profile:{submenus:[{icon:"icon-edit-profile",title:_.trans("profile.nav_edit"),link:"/profile/edit"},{icon:"icon-map-marker",title:_.trans("profile.nav_delivery_address"),link:"/profile/delivery-address"},{icon:"icon-unlock",title:_.trans("profile.nav_change_password"),link:"/profile/change-password"},{icon:"icon-credit",title:_.trans("profile.nav_bank_details"),link:"/profile/bank-details"},{icon:"icon-chat",title:_.trans("profile.nav_private_message"),link:"/profile/private-messages",shortTag:'<small class="tag tag-danger pm-badge-count"></small>'}]},funds:{submenus:[{icon:"icon-safe",title:_.trans("funds.nav_deposit"),link:"/funds/deposit"},{icon:"icon-cash",title:_.trans("funds.nav_withdrawal"),link:"/funds/withdrawal/210602"},{icon:"icon-repeat",title:_.trans("funds.nav_transfer"),link:"/funds/fund-transfer"},{icon:"icon-coins",title:_.trans("funds.nav_freebet"),link:"/funds/freebet"},{icon:"icon-history",title:_.trans("funds.nav_history"),link:"/funds/history/deposit-withdrawal"},{icon:"icon-rebate",title:_.trans("funds.nav_rebates"),link:"/funds/rebate"}]},urls:{assets:"/assets/",templates:"/assets/templates/",api:{login:t+"members/sessions",signup:t+"members",validateSession:t+"validate-session",member:a,forgotLogin:t+"members/forgot-password",publicAnnouncements:t+"announcements?operatorId=:operatorId",announcements:a+"announcements",cashierPageAnnouncements:a+"cashier-announcements",updatePassword:a+"password",bankingDetail:a+"bank-detail",deliveryAddress:a+"delivery-address",privateMessageSubjects:a+"private-messages/subjects",privateMessages:a+"private-messages",privateMessage:a+"private-messages/:messageId",privateImportant:a+"private-messages/:messageId/flag",wallets:a+"wallets",fundTransfers:a+"fund-transfers",balance:a+"wallets/:walletId/balance",freeBetClaims:a+"free-bet-claims",banks:a+"bank-accounts",systemBankAccounts:a+"system-bank-accounts",preferredBank:i+"preferred-bank/:type",depositMethods:a+"deposit-methods",offlineDeposit:a+"deposits",onlineDeposits:a+"deposits/:methodId",transactions:a+"deposits/:methodId/transactions/:transactionId",withdrawal:a+"withdrawals",withdrawalMethods:a+"withdrawal-methods",depositWithdrawalHistory:a+"histories/deposit-withdrawals?datetimeFrom=:from&datetimeTo=:to&paymentType=:paymentType&paymentStatus=:paymentStatus",fundTransferHistory:a+"histories/fund-transfers?datetimeFrom=:from&datetimeTo=:to&transferType=:transferType&transferStatus=:transferStatus",adjustmentsHistory:a+"histories/adjustments?datetimeFrom=:from&datetimeTo=:to&paymentType=:paymentType&paymentStatus=:paymentStatus",referralBonusHistory:a+"histories/referrals?dateFrom=:from&dateTo=:to",rebateSummaryList:a+"product-rebate-summaries",rebateClaims:a+"rebate-claims",rebateCodes:a+"rebate-codes",promotionClaims:a+"promotion-claims",bonusCodes:a+"promotions",favoriteSlotGames:a+"favorite-slot-games",slotGameHistory:a+"slot-game-histories",depositLauncher:{form:c+"form",redirect:c+"redirect"},maintenance:t+"operators/:oId/maintenance-modules"},cms:{captcha:"/captcha/default/lc",page:r+"page_manager?page=:page",banners:r+"banners/mobile?page=:page",widget:r+"widget/name/:widget",widgetV2:s+"widgets/:widget",games:r+"game_item/type/:gameType/mobile?game-type-category=:gtc",promotionCategories:o+"promo_categories",promotions:r+"promo_content/mobile?page=promotions&category=:category",bankingOptions:l+"banking-options",offlineDeposit:l+"offline-deposit",yeepayCards:l+"yeepay-cards",activeDepositMethods:l+"active-deposit-methods",rebates:l+"rebates",walletConfig:l+"wallet-config",bankCodes:"/cms/bank-codes",offlineWithdrawalWeChat:l+"offline-withdrawal-wechat",customDepositLink:l+"custom-deposit-link",infoCenterList:o+"info-centre/category/id/:catId/names",infoCenterDetails:o+"info-centre/category/id/:catId/content/:detailId"}}};window.Pt=window.Pt||{},Pt.Config=u}(Pt.Settings),function(){Pt.Config=_.extend(Pt.Config,{funds:{submenus:[{icon:"icon-safe",title:_.trans("funds.nav_deposit"),link:"/funds/deposit"},{icon:"icon-cash",title:_.trans("funds.nav_withdrawal"),link:"/funds/withdrawal/210602"},{icon:"icon-repeat",title:_.trans("funds.nav_transfer"),link:"/funds/fund-transfer"},{icon:"icon-history",title:_.trans("funds.nav_history"),link:"/funds/history/deposit-withdrawal"},{icon:"icon-rebate",title:_.trans("funds.nav_rebates"),link:"/funds/rebate"}]},clubNames:[{key:"pt",title:_.trans("games.palazzo"),link:"/slots/pt",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-pt.png"},{key:"mgs",title:_.trans("games.massimo"),link:"/slots/mgs",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-mgs.png"},{key:"ttg",title:_.trans("games.apollo"),link:"/slots/ttg",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-ttg.png"},{key:"png",title:_.trans("games.png"),link:"/slots/png",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-png.png"},{key:"gpi",title:_.trans("games.bravado"),link:"/slots/gpi",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-gpi.png"},{key:"ctxm",title:_.trans("games.crescendo"),link:"/slots/ctxm",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-gos.png"},{key:"betsoft",title:_.trans("games.betsoft"),link:"/slots/betsoft",gameSupport:!0,image:"/assets/images/"+Pt.Settings.app+"/home/slot-betsoft.png"}]})}(),function(e){var t={validation:{login:{username:{presence:{message:"^"+_.trans("errors.username_required")},length:{minimum:6,maximum:16,tooShort:"^"+_.trans("errors.username_min"),tooLong:"^"+_.trans("errors.username_max")}},password:{presence:{message:"^"+_.trans("errors.password_required")}}},forgotLogin:{memberCode:{presence:{message:"^"+_.trans("errors.memberCode_required")}},email:{presence:{message:"^"+_.trans("errors.password_required")},email:{message:"^"+_.trans("errors.email_invalid")}}},signup:{email:{presence:{message:"^"+_.trans("errors.email_required")},email:{message:"^"+_.trans("errors.email_invalid")}},mobile:{presence:{message:"^"+_.trans("errors.contact_required")}},currencyCode:{presence:{message:"^"+_.trans("errors.contact_required")}},memberCode:{presence:{message:"^"+_.trans("errors.username_required")},length:{minimum:6,maximum:15,tooShort:"^"+_.trans("errors.username_min"),tooLong:"^"+_.trans("errors.username_max")},format:{pattern:"[A-Za-z0-9]+",message:"^"+_.trans("errors.username_format")}},password:{presence:{message:"^"+_.trans("errors.password_required")},length:{minimum:8,maximum:10,tooShort:"^"+_.trans("errors.password_min"),tooLong:"^"+_.trans("errors.password_max")}},confirmPassword:{presence:{message:"^"+_.trans("errors.password_required")},equality:{attribute:"password",message:"^"+_.trans("errors.password_not_match")}},dob:{presence:{message:"^"+_.trans("errors.dob_required")},datetime:{dateOnly:!0,latest:e.utc().subtract(18,"years"),message:"^"+_.trans("errors.age_min")}},firstName:{presence:{message:"^"+_.trans("errors.name_required")}},acceptTerms:{presence:{message:"^"+_.trans("errors.accept_terms_required")}}},promotionClaim:{comment:{presence:{message:"^"+_.trans("errors.comment_required")}}},member:{gender:{presence:{message:"^"+_.trans("errors.gender_required")}},securityQuestion:{presence:{message:"^"+_.trans("errors.securityQuestion_required")}},securityAnswer:{presence:{message:"^"+_.trans("errors.securityAnswer_required")}},verifyPassword:{presence:{message:"^"+_.trans("errors.password_verify")}},oddsType:{presence:{message:"^"+_.trans("errors.odds_required")}},languageCode:{presence:{message:"^"+_.trans("errors.language_required")}}},updatePassword:{currentPassword:{presence:{message:"^"+_.trans("errors.currentPassword_required")},length:{minimum:8,maximum:10,tooShort:"^"+_.trans("errors.currentPassword_min"),tooLong:"^"+_.trans("errors.currentPassword_max")}},password:{presence:{message:"^"+_.trans("errors.password_required")},length:{minimum:8,maximum:10,tooShort:"^"+_.trans("errors.password_min"),tooLong:"^"+_.trans("errors.password_max")}},newPassword:{presence:{message:"^"+_.trans("errors.newPassword_required")},length:{minimum:8,maximum:10,tooShort:"^"+_.trans("errors.newPassword_min"),tooLong:"^"+_.trans("errors.newPassword_max")},equality:{attribute:"password",message:"^"+_.trans("errors.password_not_match")}}},bankDetail:{bankCode:{presence:{message:"^"+_.trans("errors.bankCode_required")}},bankNameNative:{presence:{message:"^"+_.trans("errors.bankName_required")}},bankAccountName:{presence:{message:"^"+_.trans("errors.accountName_required")}},bankBranch:{presence:{message:"^"+_.trans("errors.branchName_required")}},bankAddress:{presence:{message:"^"+_.trans("errors.bankAddress_required")}},bankAccountNumber:{presence:{message:"^"+_.trans("errors.accountNumber_required")}}},deliveryAddress:{address:{presence:{message:"^"+_.trans("errors.address_required")}},city:{presence:{message:"^"+_.trans("errors.city_required")}},postal:{presence:{message:"^"+_.trans("errors.postal_required")}}},fundTransfer:{transferFrom:{presence:{message:"^"+_.trans("errors.transferFrom_required")}},transferTo:{presence:{message:"^"+_.trans("errors.transferTo_required")}},transferAmount:{presence:{message:"^"+_.trans("errors.transferAmount_required")},numericality:{greaterThan:0}}},freeBetClaim:{transferTo:{presence:{message:"^"+_.trans("errors.transferTo_required")}},claimCode:{presence:{message:"^"+_.trans("errors.freebetCode_required")}}},withdrawal:{offline:{amount:{presence:{message:"^"+_.trans("errors.withdrawal_amount_required")},numericality:{}},bankCode:{presence:{message:"^"+_.trans("errors.bankCode_required")}},bankBranch:{presence:{message:"^"+_.trans("errors.bankBranch_required")}},bankAddress:{presence:{message:"^"+_.trans("errors.bankAddress_required")}},bankAccountName:{presence:{message:"^"+_.trans("errors.accountName_required")}},bankAccountNumber:{presence:{message:"^"+_.trans("errors.accountNumber_required")}}}},deposit:{basic:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}}},bank_transfer:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}},bankCode:{presence:{message:"^"+_.trans("errors.bankCode_required")}}},offline:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}},bankAccountId:{presence:{message:"^"+_.trans("errors.bankAccountId_required")}},bankCode:{presence:{message:"^"+_.trans("errors.bankCode_required")}},bankAccountName:{presence:{message:"^"+_.trans("errors.accountName_required")}},bankAccountNumber:{presence:{message:"^"+_.trans("errors.accountNumber_required")}},channel:{presence:{message:"^"+_.trans("errors.channel_required")}},bankTransferDate:{presence:{message:"^"+_.trans("errors.depositDate_required")}},depositTime:{presence:{message:"^"+_.trans("errors.depositTime_required")}}},daddy_pay_qr:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}},alipayNickname:{presence:{message:"^"+_.trans("errors.alipayNickname_required")}},alipayAccount:{presence:{message:"^"+_.trans("errors.alipayAccount_required")}}},yeepay_card:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}},cardType:{presence:{message:"^"+_.trans("errors.cardType_required")}},cardCount:{presence:{message:"^"+_.trans("errors.cardCount_required")},numericality:{lessThanOrEqualTo:5,greaterThanOrEqualTo:1}}},yeepay_card_validation_template:{cardId:{presence:{message:"^"+_.trans("errors.cardId_required")}},cardValue:{presence:{message:"^"+_.trans("errors.cardValue_required")}},cardPassword:{presence:{message:"^"+_.trans("errors.cardPassword_required")}}},sda_pay_alipay:{amount:{presence:{message:"^"+_.trans("errors.deposit_amount_required")},numericality:{}}}},history:{from:{presence:{message:"^"+_.trans("errors.dateFrom_required")},datetime:{earliest:e.utc().subtract(3,"months").subtract(1,"day"),message:"^"+_.trans("errors.date_min")}},to:{presence:{message:"^"+_.trans("errors.dateTo_required")}}}}};window.Pt=window.Pt||{},Pt.Rules=t}(moment),function(e){var t={start:function(){e.start()},done:function(){e.done()}};_.Class("Pt.Helpers.Nprogress",t)}(window.NProgress),function(e,t){var n=5,r={success:function(r){var o=e.isArray(r)?r.join("<br>"):r,s=0===arguments[1]?0:n;t.alert(1,o,s)},warning:function(e){t.alert(2,e,n)},error:function(r){var o=e.isArray(r)?r.join("<br>"):r,s=0===arguments[1]?0:n;t.alert(3,o,s)},info:function(e){t.alert(4,e,n)},confirm:function(e,n,r,o,s){t.confirm(e,n,r,o,s)}};e.Class("Pt.Helpers.Notify",r)}(_,window.notie),function(e){"use strict";var t={show:function(t){e.error(t.join("<br>"))},handle:function(t){return 400===t.status?(this.handle400(t),!1):void e.error(t.StatusText)},handle400:function(t){return"object"!=typeof t.ErrorMessage&&(e.error(t.ErrorMessage),!1)}};_.Class("Pt.Helpers.Error",t)}(Pt.Helpers.Notify),$(document).ready(function(){"use strict";function e(){var e=$(this).parent().find("input.password-field");$(this).hasClass("show")?(e.attr("type","password"),$(this).removeClass("show")):(e.attr("type","text"),$(this).addClass("show"))}var t=Pt.Managers.Broadcaster,n=[".button-show-password","click",e];t.subscribe(t.getChannel("pageLoaded"),function(){var e=$('input[type="password"]');e.length&&$("body").off(n[1],n[0],n[2]).on(n[1],n[0],{context:self},n[2])})}),function(e){var t={show:function(t){var n=e("#genericModal");n.find(".modal-body").html(t).end().modal(),arguments[1]&&n.find(".modal-title").html(arguments[1])},hide:function(){e("#genericModal").find(".modal-title").html("").end().find(".modal-body").html("").end().modal("hide")}};_.Class("Pt.Helpers.Modal",t)}(jQuery),function(e,t,n){var r={extendDepositAmountRules:function(t,r,o){var s=n.validation.deposit[t].amount.numericality;s.notLessThanOrEqualTo=e.trans("errors.deposit_amount_notLessThanOrEqualTo"),s.notGreaterThanOrEqualTo=e.trans("errors.deposit_amount_notGreaterThanOrEqualTo"),s.greaterThanOrEqualTo=+r,s.lessThanOrEqualTo=+o},getMethodRules:function(e){var t="withdrawal"===arguments[1]?"withdrawal":"deposit";return n.validation[t][e]||{}},extendWithdrawalAmountRules:function(t,r,o){var s=n.validation.withdrawal[t].amount.numericality;s.notLessThanOrEqualTo=e.trans("errors.withdrawal_amount_notLessThanOrEqualTo"),s.notGreaterThanOrEqualTo=e.trans("errors.withdrawal_amount_notGreaterThanOrEqualTo"),s.greaterThanOrEqualTo=+r,s.lessThanOrEqualTo=+o}};e.Class("Pt.Helpers.RulesHelper",r)}(_,jQuery,Pt.Rules),function(e,t,n,r){"use strict";var o={decode:function(e){e=e.length?e[0]:null;var n=t.defer(),o=r();if(e.files&&e.files[0]){var s=new FileReader;s.onload=function(e){o.decodeFromImage(e.target.result,function(t,r){t?n.reject({error:_.trans("errors.qr_decode_error")}):n.resolve({file:e.target.result,value:r})})},s.readAsDataURL(e.files[0])}else n.reject({error:_.trans("errors.qr_no_file_selected")});return n.promise},decodeImage:function(e){var n=t.defer(),o=r();return o.decodeFromImage(e[0],function(e,t){e?n.reject({error:_.trans("errors.qr_decode_error")}):n.resolve({file:"",value:t})}),n.promise},getImage:function(e){e=e.length?e[0]:null;var n=t.defer();if(e.files&&e.files[0]){var r=new FileReader;r.onload=function(e){n.resolve({file:e.target.result})},r.readAsDataURL(e.files[0])}else n.reject({error:_.trans("errors.qr_no_file_selected")});return n.promise}};_.Class("Pt.Helpers.QrCode",o)}(jQuery,Q,Pt.Helpers.Notify,QCodeDecoder),function(){"use strict";function e(){function e(e,t){try{var r=n();!_.isEmpty(r)&&_.isFunction(r.trackGoal)&&r.trackGoal(e,t)}catch(o){}}function t(e,t,r){try{var o=n();!_.isEmpty(o)&&_.isFunction(o.trackEvent)&&o.trackEvent(e,t,r)}catch(s){}}function n(){return"undefined"!=typeof Piwik?Piwik.getAsyncTracker():{}}var r={SIGN_UP_SUCCESS:1,LOG_IN_SUCCESS:2,DEPOSIT_SUBMIT:3,WITHDRAWAL_SUBMIT:5,SIGN_UP_FAIL:7,LOG_IN_FAIL:8},o={MEMBER_ACTIONS:"Member Actions",PAYMENT_ACTIONS:"Payment Actions"},s={SIGN_UP_FAIL:"Sign Up Fail",LOG_IN_FAIL:"Log In Fail",LOG_IN_SUCCESS:"Log In Success",WITHDRAWAL_SUCCESS:"Withdrawal Success",WITHDRAWAL_FAIL:":gateway: - Withdrawal Fail"};return{goalMap:r,eventMap:o,actionMap:s,trackGoal:e,trackEvent:t}}_.Class("Pt.Managers.Analytics",new e)}(),function(){function e(){function e(){}function t(e,t,n){s.call(o,e)||(o[e]=[]),"string"==typeof t&&(t=_.bind(n[t],n));var r=o[e].push(t)-1;return{remove:function(){delete o[e][r]}}}function n(e,t){s.call(o,e)&&o[e].forEach(function(e){e(void 0!==t?t:{})})}function r(e){var t=a;try{for(var n=e.split("."),r=0;r<n.length;r++)t=t[n[r]];return t}catch(o){return!1}}var o={},s=o.hasOwnProperty,a={headerActions:"headerActions",requestTimeout:"requestTimeout",memberUnauthorized:"memberUnauthorized",slideNavigation:"slideNavigation",notification:"notification",navigate:"navigate",pageLoaded:"pageLoaded",gameFilters:"gameFilters",funds:{transferCompleted:"transferCompleted",walletSelected:"walletSelected",bonusCodeSelected:"bonusCodeSelected"}};return e.prototype={subscribe:t,publish:n,getChannel:r},new e}_.Class("Pt.Managers.Broadcaster",new e)}(),function(e,t){"use strict";function n(){function e(){}function n(e,n){var r=this;t.each(e,function(e,t){r.set(n+t,e)})}function r(e,n,r){var o={TTL:36e6};t.extend(o,r),a(e,n,o)}function o(e){return l.canUse()?l.get(e)||null:Pt.Cache[e]||null}function s(e){return l.canUse()?l.deleteKey(e):Pt.Cache[e]=null,this}function a(e,t,n){l.canUse()?l.set(e,t,n):Pt.Cache[e]=t}function i(){l.flush()}var l=window.simpleStorage;return e.prototype={setObject:n,set:r,get:o,remove:s,flush:i},new e}t.Class("Pt.Managers.Cache",new n)}(jQuery,_),function(e,t){"use strict";function n(){function n(e){return window.Cookies.get(e)}function r(n){var r={name:"",value:"",expires:7,path:"/",secure:!e.isEmpty(t.secure)&&t.secure};e.extend(r,n),window.Cookies.set(r.name,r.value,{expires:r.expires,path:r.path,domain:r.domain,secure:r.secure})}function o(n){var r={name:"",path:"/",secure:!e.isEmpty(t.secure)&&t.secure};return e.extend(r,n),window.Cookies.remove(r.name,{path:r.path,secure:r.secure})}return{get:n,set:r,remove:o}}e.Class("Pt.Managers.Cookie",new n)}(_,Pt.Settings),function(e,t){"use strict";function n(){function n(t){_.isArray(t)&&(_.each(t,function(t){var n=o(t.controller);c[t.controller]=c[t.controller]||new n.controller,_.isEmpty(t.middleware)||(c[t.controller].middleware=t.middleware),e(t.route,_.bind(c[t.controller].activate,c[t.controller]),_.bind(c[t.controller][n.method],c[t.controller]))}),e())}function o(e){if("string"==typeof e){for(var t=e.split("@"),n=t[0].split("."),r=window.Pt||{},o=1;o<n.length;o++)r=r[n[o]];return{controller:r,method:t[1]}}}function s(t){e(t)}function a(n){e(n),t.publish(t.getChannel("navigate"),n)}function i(){return r}function l(e){r=e}var c={};return{add:n,redirect:s,navigate:a,getContext:i,setContext:l}}var r=null;_.Class("Pt.Managers.Router",new n)}(window.page,Pt.Managers.Broadcaster),function(e,t,n,r,o,s){"use strict";function a(){function a(e,t,n,r){return d("GET",e,t,n,r)}function i(e,t,n,r){return d("DELETE",e,t,n,r)}function l(e,t,n,r){return d("POST",e,t,n,r)}function c(e,t,n,r){return d("PUT",e,t,n,r)}function u(e){return h=e||h,this}function d(a,i,l,c,u,g){var v=g||n.defer();c=c||"json";var _=t.extend({type:a,url:i,data:l,dataType:c,timeout:15e3,beforeSend:function(e){var n=o.get(h),s=t.isEmpty(r.debug_host)?window.location.hostname.replace(/^(www\.)|^(m\.)/i,""):r.debug_host,a=o.get("lang")||"zh-hans";t.isEmpty(n)||e.setRequestHeader("Authorization","Prometheus "+n),e.setRequestHeader("Prometheus-BoId",r.operatorId),e.setRequestHeader("Prometheus-operator-id",r.cmsId),e.setRequestHeader("Prometheus-ClientIp",r.clientIp),e.setRequestHeader("App-Origin",window.location.origin),e.setRequestHeader("Prometheus-Domain",s),e.setRequestHeader("Accept-Language",a),e.setRequestHeader("X-Client-Id",r.apiKey.browserKey),e.setRequestHeader("X-Client-Secret",r.apiKey.secretKey)},success:function(e,n,r){p(r),f(e)?d(a,i,l,c,u,v):!t.isUndefined(u)&&u.returnXhr?v.resolve({data:e,status:n,xhr:r}):v.resolve(e)},error:function(e){if(void 0,"timeout"===e.statusText)return void s.publish(s.getChannel("requestTimeout"),{url:i});if(401===e.status&&!m(i))return o.remove({name:h}),void s.publish(s.getChannel("memberUnauthorized"));p(e);try{var n=e.responseJSON;if(m(i))return v.reject({error:n,statusText:e.statusText,status:e.status}),this;if(t.isObject(n.ErrorMessage)){var r=t.flatten(t.map(n.ErrorMessage,function(e,t){return e}));return v.reject(r),this}return v.reject([n.ErrorMessage]),this}catch(e){v.reject([t.trans("errors.unknown_error")])}}},u||{});return e.ajax(_),v.promise}function f(e){return"undefined"!=typeof e&&"407"===e.status_code&&(t.each(e.data,function(e,t){o.set({name:t,value:e})}),!0)}function p(e){var n=e.getResponseHeader("Authorization");t.isEmpty(n)||o.set({name:h,value:n})}function m(e){return/\/.*\/api\/v.*/.test(e)}var h=r.tokenKey;return{get:a,post:l,put:c,del:i,setAuthKey:u}}t.Class("Pt.Managers.HttpClient",new a)}(jQuery,_,Q,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.Broadcaster),function(e,t,n,r){"use strict";function o(e){a.getActiveSlidebar()&&(e.preventDefault(),e.stopPropagation(),a.close())}function s(){function e(e,t,n){s("open",l[e],n,t)}function n(e,t,n){s("close",l[e],n,t)}function r(e,t,n){s("toggle",l[e],n,t)}function o(){a.getActiveSlidebar()&&a.close()}function s(e,n,r,o){t.isEmpty(o)||o.preventDefault(),a[e](n,function(t){"function"==typeof r&&r({event:e,side:n,ev:t})})}return{open:e,close:n,toggle:r,closeAll:o}}var a=new n({scrollLock:!0}),i=[".js-close-any","click",o];a.init(),e(a.events).on("opening",function(t){e("[canvas]").addClass("js-close-any"),e(i[0]).on(i[1],i[2])}),e(a.events).on("closing",function(t){e(i[0]).off(i[1],i[2]),e("[canvas]").removeClass("js-close-any")}),e(a.events).on("closed",function(e,t){r.publish(r.getChannel("slideNavigation"),{event:e.type,id:t})}),r.subscribe(r.getChannel("navigate"),function(){a.close()});var l={left:"app-left-nav"};t.Class("Pt.Managers.SlideNavigation",new s)}(jQuery,_,slidebars,Pt.Managers.Broadcaster),function(e,t,n){"use strict";function r(){function r(e){var t=$('<div class="page-canvas inactive"></div>').html(e);return $(".page-container").append(t),this}function o(e){setTimeout(function(){$(l).toggleClass("active inactive"),n.publish(n.getChannel("pageLoaded"),{header:e.header}),setTimeout(function(){$(".page-container > .inactive").remove()},10),s(),t.done()},10)}function s(){var e=$("body"),t=e.data("class")||"",n=location.pathname.replace(/\//gi,"-").substr(1)||"home";e.attr("class",t+" "+n)}function a(t){null===i&&(i=t),e.isEqual(i,t)||(i.destroy(),i=t)}var i=null,l=".page-container > .page-canvas";return{container:".page-container > .inactive",render:r,show:o,handle:a}}e.Class("Pt.Managers.Page",new r)}(_,Pt.Helpers.Nprogress,Pt.Managers.Broadcaster),function(e,t,n,r,o,s,a,i,l){"use strict";function c(){function e(){var e=r.app+"-template-version",t=i.get(e);t!==d&&(i.flush(),i.set(e,d,{TTL:3154e7}))}function a(){var e="false",r=n.defer(),a=[],l=[];return t.each(o.templates,function(t,n){var r=p+n;i.get(r)===!0&&"true"!==e||(l.push(r),a.push(s.get(f+t)))}),n.allSettled(a).then(function(e){e.forEach(function(e,t){"fulfilled"===e.state&&(i.set(l[t],!0),i.setObject(e.value,l[t]+"."))}),r.resolve(!0)}),r.promise}function c(e,n){n=n||{};try{var o=i.get(p+e);if(!t.isEmpty(o)){o=o.replace(/<%\s*include\s*(.*?)\s*%>/g,function(e,t){return'<%= _.include("'+t+'", arguments) %>'});var s=t.template(o);return s(n)}}catch(a){r.app_debugger&&l.error(a.message+"<br/><br/>"+a.stack,0)}return""}function u(e,n){var r=t.template(e);return r(n)}var d="1500883558541",f=o.urls.templates+r.app+"/",p="tpl.";return e(),{init:a,get:c,compile:u}}t.Class("Pt.Managers.Template",new c)}(jQuery,_,Q,Pt.Settings,Pt.Config,Pt.Managers.HttpClient,Pt.Managers.Broadcaster,Pt.Managers.Cache,Pt.Helpers.Notify),function(e,t,n){"use strict";function r(e){this.data=e}function o(o,s){function a(){y.length||(y=e(o)),g&&h()}function i(e){return s=e,this}function l(e){return g=e,this}function c(e){return v=e,this}function u(t,o){var a=new r(y.serializeArray());e(_).remove();var i=n(y,s);return i?void m(y,i):(v&&(a=y.serializeArray()),t.call(o,a,o),!0)}function d(){t.each(b,function(t){e("body").off(t[1],t[0],self[t[2]])}),e(_).remove()}function f(){var r={},o={},a=e(this),i=e(this).closest("form");if(r[a.attr("name")]=a.val(),o[a.attr("name")]=s[a.attr("name")],"object"==typeof s[a.attr("name")]&&"undefined"!=typeof s[a.attr("name")].equality){var l=s[a.attr("name")].equality.attribute;r[l]=i.find('input[name="'+l+'"]').val()}var c=n(r,o)||{};t.isEmpty(c)?e(this).next("small").remove():p(e(this),c)}function p(e,n){t.each(n,function(t){var n='<small class="notification-text text-danger">'+t[0]+"</small>";e.next("small").remove(),e.after(n)})}function m(n,r){n=e(n),t.each(r,function(t,r){var o=n.find('[name="'+r+'"]'),s='<small class="notification-text text-danger">'+t[0]+"</small>",a=o.data("eph");a?e("."+a).html(s):(o.next("small").remove(),o.after(s))})}function h(){t.each(b,function(t){e("body").off(t[1],t[0],t[2]).on(t[1],t[0],{context:self},t[2])})}var g=!1,v=!0,_=".notification-text",y=e(o),b=[[o+" input","change",f],[o+" textarea","change",f],[o+" select","change",f]];return{init:a,setRules:i,validate:u,destroy:d,bindInput:l,shouldSerialize:c}}r.prototype={get:function(e){var n=t.findWhere(this.data,{name:e});if(n)return n.value},set:function(e,n){var r=t.findWhere(this.data,{name:e});return r?r.value=n:this.data.push({name:e,value:n}),this},toFormData:function(){var e=new FormData;return t.each(this.data,function(t){e.append(t.name,t.value)}),e}},t.Class("Pt.Managers.Validation",o)}(jQuery,_,validate),function(e,t,n,r){"use strict";function o(){function o(o,s){var a=e.defer(),i=r.post(n.urls.api.login,{memberCode:o,password:s,operatorId:t.operatorId,deviceId:"Mobile"});return i.then(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise}function s(o,s){var a=e.defer(),i=r.post(n.urls.api.forgotLogin,{memberCode:o,email:s,operatorId:t.operatorId,deviceId:"Mobile"});return i.then(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise}function a(){var t=e.defer(),o=r.get(n.urls.api.validateSession,{});return o.then(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t.promise}return{login:o,forgotLogin:s,validate:a}}_.Class("Pt.Services.Members.Session",new o)}(Q,Pt.Settings,Pt.Config,Pt.Managers.HttpClient),function(e,t,n,r,o,s){"use strict";function a(){function a(){var a=e.str_replace_key({":memberCode":n.member.code},r.urls.api.member),i=t.defer();return s.get(a).then(function(t){var n=e.extendOnly(new o.Member,t);i.resolve(n)}).fail(function(e){i.reject(e)}),i.promise}function i(n){var o=r.urls.api.signup,a=t.defer();e.getParameterByName("testAccount")&&n.push({name:"testAccount",value:1});var i=s.post(o,n);return i.then(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a.promise}function l(o){var a=e.str_replace_key({":memberCode":n.member.code},r.urls.api.member),i=t.defer(),l=s.put(a,o);return l.then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise}function c(o){var a=e.str_replace_key({":memberCode":n.member.code},r.urls.api.updatePassword),i=t.defer(),l=s.put(a,o);return l.then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise}function u(o){var a=e.str_replace_key({":memberCode":n.member.code},r.urls.api.deliveryAddress),i=t.defer(),l=s.put(a,o);return l.then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise}return{getMember:a,create:i,update:l,updatePassword:c,updateDeliveryAddress:u}}e.Class("Pt.Services.Members.Member",new a)}(_,Q,Pt.Settings,Pt.Config,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a,i){"use strict";function l(){function l(){var l=e.str_replace_key({":operatorId":n.operatorId},r.urls.api.publicAnnouncements);n.member.isLoggedIn&&(l=e.str_replace_key({":memberCode":n.member.code},r.urls.api.announcements));var c=t.defer(),u=btoa(l)+"_"+i.get("lang"),d=s.get(u);return e.isEmpty(d)?a.get(l).then(function(t){var n=[];e.each(t.data.announcements,function(t){n.push(e.extendOnly(new o.Announcements,t))}),e.isEmpty(n)||s.set(u,n,{TTL:18e4}),c.resolve(n)}).fail(function(e){c.reject(e)}):c.resolve(d),c.promise}function c(){
var l=e.str_replace_key({":memberCode":n.member.code},r.urls.api.cashierPageAnnouncements),c=t.defer(),u=btoa(l)+"_"+i.get("lang"),d=s.get(u);return e.isEmpty(d)?a.get(l).then(function(t){var n=[];e.each(t.data.announcements,function(t){n.push(e.extendOnly(new o.CashierAnnouncements,t))}),e.isEmpty(n)||s.set(u,n,{TTL:18e4}),c.resolve(n)}).fail(function(e){c.reject(e)}):c.resolve(d),c.promise}return{getAnnouncements:l,getCashierAnnouncements:c}}e.Class("Pt.Services.Members.Announcements",new l)}(_,Q,Pt.Settings,Pt.Config,Pt.Contracts,Pt.Managers.Cache,Pt.Managers.HttpClient,Pt.Managers.Cookie),function(e,t,n,r,o){"use strict";function s(){function s(){var r=t.defer(),s=[o.get(a),o.get(n.urls.cms.walletConfig)];return t.all(s).then(function(t){var n=t[0].data.wallets,o=e.map(t[1].data.wallets,Number),s=[];e.each(n,function(t){e.indexOf(o,t.id)!==-1&&(t.name=e.trans("wallets.id_"+t.id),s.push(t))}),r.resolve(s)}).fail(function(e){r.reject(e)}),r.promise}var a=e.str_replace_key({":memberCode":r.member.code},n.urls.api.wallets);return{getAll:s}}e.Class("Pt.Services.Members.Wallet",new s)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient),function(e,t,n,r,o){"use strict";function s(){function s(e){var n=t.defer();return o.post(a,e).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}var a=e.str_replace_key({":memberCode":r.member.code},n.urls.api.fundTransfers);return{transfer:s}}e.Class("Pt.Services.Members.FundTransfer",new s)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient),function(e,t,n,r,o){"use strict";function s(){function s(s){var a=e.str_replace_key({":memberCode":r.member.code,":walletId":s},n.urls.api.balance),i=t.defer();return o.get(a,[],"json",{timeout:4e4}).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}function a(s){var a=[],i="",l=t.defer();return e.each(s,function(t){i=e.str_replace_key({":memberCode":r.member.code,":walletId":t.id},n.urls.api.balance),a.push(o.get(i,[],"json",{timeout:4e4}))}),t.all(a).then(function(t){e.each(s,function(n){var r=e.find(t,function(e){return e.data.balance.wallet_id===n.id});e.isEmpty(r)||(n.balance=r.data.balance.amount)}),l.resolve(s)}),l.promise}return{getByWalletId:s,getByWalletPromise:a}}e.Class("Pt.Services.Members.Balance",new s)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient),function(e,t,n,r,o){"use strict";function s(){function s(e){var n=t.defer();return o.post(a,e).then(function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise}var a=e.str_replace_key({":memberCode":r.member.code},n.urls.api.freeBetClaims);return{claim:s}}e.Class("Pt.Services.Members.FreeBetClaim",new s)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function e(){var e=t.str_replace_key({":memberCode":r.member.code},o.urls.api.withdrawalMethods),i=n.defer();return a.get(e).then(function(e){var n=[];t.each(e.data.paymentMethods,function(e){n.push(t.extendOnly(new s.WithdrawalMethod,e))}),i.resolve(n)}).fail(function(e){i.resolve(e)}),i.promise}function i(){var e=t.str_replace_key({":memberCode":r.member.code,":type":"withdrawal"},o.urls.api.preferredBank),s=n.defer();return a.get(e).then(function(e){s.resolve(e.data)}).fail(function(e){s.resolve(e)}),s.promise}function l(e){var s=t.str_replace_key({":memberCode":r.member.code},o.urls.api.withdrawal),i=n.defer();return a.post(s,e).then(function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise}return{getMethods:e,getPreferredBank:i,withdraw:l}}t.Class("Pt.Services.Members.Withdrawal",new i)}(jQuery,_,Q,Pt.Settings,Pt.Config,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s){"use strict";function a(){function a(){var r=f(n.urls.api.banks),a=t.defer();return m?a.resolve(m):s.get(r).then(function(t){var n=[];t.data.bankAccounts.length>0&&e.each(t.data.bankAccounts,function(t){n.push(e.extendOnly(new o.Bank,t))}),a.resolve(n)}).fail(function(e){a.reject(e)}),a.promise}function i(){var r=f(n.urls.api.systemBankAccounts),a=t.defer();return s.get(r).then(function(t){var n=[];t.data.systemBankAccounts.length>0&&e.each(t.data.systemBankAccounts,function(t){n.push(e.extendOnly(new o.SystemBankAccount,t))}),a.resolve(n)},function(e){a.reject(e)}),a.promise}function l(){var n=t.defer();return s.get(p).then(function(t){var r=[];e.each(t.data,function(t,n){r.push(e.extendOnly(new o.BankingOption,{code:n,name:e.trans("funds.offline_channel_"+t)}))}),n.resolve(r)},function(e){n.reject(e)}),n.promise}function c(){var i=e.str_replace_key({":memberCode":r.member.code},n.urls.api.bankingDetail),l=t.defer();return a().then(function(t){s.get(i).then(function(n){var r=null;if(e.isEmpty(n.data))r=new o.BankDetail,l.resolve(r);else{r=e.extendOnly(new o.BankDetail,n.data.bankDetails);var s=e.findWhere(t,{bankCode:r.get("bankCode")});s&&r.bankSupported(),l.resolve(r)}}).fail(function(e){l.reject(e)})}),l.promise}function u(o){var a=e.str_replace_key({":memberCode":r.member.code},n.urls.api.bankingDetail),i=t.defer();return s.put(a,o).then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise}function d(){var r=n.urls.cms.alogatewayBanks,a=t.defer();return s.get(r).then(function(t){var n=e.isArray(t.data)?t.data:[t.data],r=[];e.each(n,function(t){r.push(e.extendOnly(new o.Bank,{bankCode:t,bankName:t}))}),a.resolve(r)},function(e){a.reject(e)}),a.promise}function f(t){return e.str_replace_key({":memberCode":r.member.code},t)}var p=n.urls.cms.bankingOptions,m=null;return{getBanks:a,getSystemBankAccounts:i,getBankingOptions:l,getBankDetail:c,updateBankDetail:u,getAlogatewayBanks:d}}e.Class("Pt.Services.Members.Bank",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function e(){var e=n.defer();return m.methods?e.resolve(m.methods):a.get(d).then(function(n){var r=[];t.each(n.data,function(e){r.push(t.extendOnly(new s.DepositMethod,e))}),m.methods=r,e.resolve(r)},function(t){e.reject(t)}),e.promise}function i(e){var s=n.defer(),i=t.str_replace_key({":memberCode":r.member.code},o.urls.api.offlineDeposit);return a.post(i,e,"json",{contentType:!1,processData:!1}).then(function(e){+e.invId<=0?s.reject(["Failed to create transaction."]):s.resolve({transactionId:e.invId})},function(e){s.reject(e)}),s.promise}function l(){var e=t.str_replace_key({":memberCode":r.member.code,":type":"deposit"},o.urls.api.preferredBank),i=n.defer();return a.get(e).then(function(e){var n=e.data.tblDepositWireTransfer;if(t.isEmpty(n))r=new s.DepositPreferredBank;else var r=t.extendOnly(new s.DepositPreferredBank,n);i.resolve(r)}).fail(function(e){i.resolve(e)}),i.promise}function c(){var e=n.defer();return a.get(f).then(function(n){var r=[];t.each(n.data,function(e,o){if(o.indexOf("show_")!==-1){var a=o.replace("show_",""),i="true"===e,l=n.data["default_value_"+a];l&&"datetoday"===l.toLowerCase()&&(l=moment().format("YYYY-MM-DD")),"depositTime"!=a||i?"depositDate"==a&&(a="bankTransferDate"):l=moment().format("hh:mm:ss"),r.push(t.extendOnly(new s.OfflineDepositField,{name:a,shouldDisplay:i,defaultValue:l}))}}),e.resolve(r)},function(){}),e.promise}function u(){var e=n.defer();return t.isNull(m.customDepositLink)?a.get(p).then(function(t){m.customDepositLink=t.data,e.resolve(m.customDepositLink)}).fail(function(t){e.reject(t)}):e.resolve(m.customDepositLink),e.promise}var d=t.str_replace_key({":memberCode":r.member.code},o.urls.api.depositMethods),f=o.urls.cms.offlineDeposit,p=o.urls.cms.customDepositLink,m={customDepositLink:null};return{getMethods:e,createOfflineTransaction:i,getConfig:c,getPreferredBank:l,getCustomDepositLink:u}}t.Class("Pt.Services.Members.Deposit",i())}(jQuery,_,Q,Pt.Settings,Pt.Config,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s){"use strict";function a(){function a(a){var i=e.str_replace_key({":memberCode":r.member.code,":from":a.from,":to":a.to,":paymentType":a.paymentType,":paymentStatus":a.paymentStatus},n.urls.api.depositWithdrawalHistory),l=t.defer();return s.get(i).then(function(t){var n=[];e.each(t.data.histories,function(t){n.push(e.extendOnly(new o.DepositWithdrawalHistory,t))}),l.resolve(n)}).fail(function(e){l.reject(e)}),l.promise}function i(a){var i=e.str_replace_key({":memberCode":r.member.code,":from":a.from,":to":a.to,":paymentType":a.paymentType,":paymentStatus":a.paymentStatus},n.urls.api.adjustmentsHistory),l=t.defer();return s.get(i).then(function(t){var n=[];e.each(t.data.histories,function(t){n.push(e.extendOnly(new o.AdjustmentsHistory,t))}),l.resolve(n)}).fail(function(e){l.reject(e)}),l.promise}function l(a){var i=e.str_replace_key({":memberCode":r.member.code,":from":a.from,":to":a.to,":transferType":a.transferType,":transferStatus":a.transferStatus},n.urls.api.fundTransferHistory),l=t.defer();return s.get(i).then(function(t){var n=[];e.each(t.data.histories,function(t){n.push(e.extendOnly(new o.FundTransferHistory,t))}),l.resolve(n)}).fail(function(e){l.reject(e)}),l.promise}function c(a){var i=e.str_replace_key({":memberCode":r.member.code,":from":a.from,":to":a.to},n.urls.api.referralBonusHistory),l=t.defer();return s.get(i).then(function(t){var n=[];e.each(t.data.histories,function(r){var s=e.extendOnly(new o.ReferralBonusHistory,r);s=e.extend(s,t.data.report),n.push(s)}),l.resolve(n)}).fail(function(e){l.reject(e)}),l.promise}return{getDepositWithdrawal:a,getAdjustments:i,getFundTransfer:l,getReferralBonus:c}}e.Class("Pt.Services.Members.History",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function i(n){var r=t.defer(),s=o.get(h);return n=n||!1,e.isEmpty(s)||n?c().then(function(t){var n=e.where(t,{status:"0"}),s={unread:n.length};o.set(h,s,{TTL:18e4}),r.resolve(s)}):r.resolve(s),r.promise}function l(){var o=e.str_replace_key({":memberCode":n.member.code},r.urls.api.privateMessageSubjects),i=t.defer();return a.get(o).then(function(t){var n=[];e.each(t.data.message_subjects,function(t){n.push(e.extendOnly(new s.PrivateMessageSubjects,t))}),i.resolve(n)}).fail(function(e){i.reject(e)}),i.promise}function c(){var i=e.str_replace_key({":memberCode":n.member.code},r.urls.api.privateMessages),l=t.defer(),c=o.get(m);return e.isEmpty(c)?a.get(i).then(function(t){var n=[];e.each(t.data.private_messages,function(t){n.push(e.extendOnly(new s.PrivateMessage,t))}),o.set(m,n,{TTL:18e4}),l.resolve(n)}).fail(function(e){l.reject(e)}):l.resolve(c),l.promise}function u(o){var i=e.str_replace_key({":memberCode":n.member.code,":messageId":o},r.urls.api.privateMessage),l=t.defer();return a.get(i).then(function(t){if(!t.data.private_messages.length)return l.resolve(new s.PrivateMessage),this;var n=t.data.private_messages[0],r=[],o=e.extendOnly(new s.PrivateMessage,n);e.each(o.replies,function(t){r.push(e.extendOnly(new s.PrivateMessage,t))}),o.replies=r,p(),l.resolve(o)}).fail(function(e){l.reject(e)}),l.promise}function d(o,s){var i=e.str_replace_key({":memberCode":n.member.code,":messageId":o},r.urls.api.privateMessage),l=t.defer();return a.post(i,s).then(function(e){p(),l.resolve(e)}).fail(function(e){l.reject(e)}),l.promise}function f(o){var s=e.str_replace_key({":memberCode":n.member.code,":messageId":o},r.urls.api.privateMessage),i=t.defer();return a.del(s).then(function(e){p(),i.resolve(e)}).fail(function(e){i.reject(e)}),i.promise}function p(){o.remove(m),o.remove(h)}var m=n.member.code+"-private-messages",h=n.member.code+"-unread-message";return{getUnread:i,getSubjects:l,getPrivateMessages:c,getMessage:u,sendMessage:d,deleteMessage:f}}e.Class("Pt.Services.Members.PrivateMessage",new i)}(_,Q,Pt.Settings,Pt.Config,Pt.Managers.Cache,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function i(o,i){var u=t.defer(),f=o+"-"+i+"-"+d,p=e.str_replace_key({":lang":d,":oId":r.cmsId,":gameType":o,":gtc":i},n.urls.cms.games),m=a.get(f),h=function(e){var t=l(e);u.resolve({games:e,filters:t})};if(c(o,i),e.isEmpty(m)){var g=s.get(p,{});g.then(function(t){e.isEmpty(t)||a.set(f,t),h(t)}).fail(function(){u.reject([])})}else h(m);return u.promise}function l(t){var n={category:[],playlines:[],style:[]};return e.each(t,function(e){"undefined"!=typeof e.tags.category&&n.category.push(e.tags.category),"undefined"!=typeof e.tags.playlines&&n.playlines.push(e.tags.playlines),"undefined"!=typeof e.tags.style&&n.style.push(e.tags.style)}),n.category=e.uniq(e.flatten(n.category)).filter(Boolean).sort(),n.playlines=e.uniq(e.flatten(n.playlines)).filter(Boolean).sort(),n.style=e.uniq(e.flatten(n.style)).filter(Boolean).sort(),n}function c(t,n){e.each(u,function(e){d!==e&&a.remove(t+"-"+n+"-"+e)})}var u=["en","zh-hans"],d=o.get("lang")||"zh-hans";return{getGames:i,getFiltersOptions:l}}e.Class("Pt.Services.Cms.Games",new i)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.HttpClient,Pt.Managers.Cache),function(e,t,n,r,o,s){function a(){function r(){var r=t.defer();return s.get(n.urls.cms.yeepayCards).then(function(t){var n=[];e.each(t.data,function(e,t){var r=new o.CardType;r.set("code",t).set("denominations",e),n.push(r)}),r.resolve(n)},function(e){r.reject(e)}),r.promise}return{getCardConfig:r}}e.Class("Pt.Services.Cms.YeePayCard",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s){function a(){function r(r){var a=t.defer();return s.get(n.urls.cms.bankCodes,{methodCode:r}).then(function(t){var n=t.data,s=[];e.each(n,function(t){"101ka_b2c"===r&&(t.bankCode+="-WAP"),s.push(e.extendOnly(new o.Bank,{bankCode:t.bankCode,bankName:e.trans("banks."+t.name)}))}),a.resolve(s)},function(e){a.reject(e)}),a.promise}return{getBankCodeByMethodCode:r}}e.Class("Pt.Services.Cms.BankCode",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s){function a(){function o(e){var n=t.defer();return s.post(i,{transferAmount:e}).then(function(e){n.resolve(e.data.transaction.transactionId)},function(e){n.reject(e)}),n.promise}function a(o){var a=e.str_replace_key({":memberCode":r.member.code,":methodId":120254,":transactionId":o},n.urls.api.transactions),i=t.defer();return s.get(a).then(function(e){i.resolve(e.data)},function(e){i.reject(e)}),i.promise}var i=e.str_replace_key({":memberCode":r.member.code,":methodId":120254},n.urls.api.onlineDeposits);return{createTransaction:o,getTransaction:a}}e.Class("Pt.Services.Members.SdaPay",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o,s){"use strict";function a(){function a(){var e=t.defer();return s.get(f).then(function(t){var n=[],r=0,o=null,s=void 0,a=t.data.start_period||moment(new Date).format("YYYY-MM-DD");for(g=t.data;r<5;r++)o=s?s.day(-2).startOf("isoWeek").isoWeekday(1):moment().startOf("isoWeek").isoWeekday(1),o.diff(new Date(a),"days")>-1&&n.push(moment(o.format("YYYY-MM-DD"))),s=o;e.resolve(n)},function(t){e.reject(t)}),e.promise}function i(){var e=t.defer();return e.resolve(l(g)),e.promise}function l(t){var n={};if(!e.has(t,"rebate_category_ordering"))return n;var r=t.rebate_category_ordering.categories;return r=e.isArray(r)?r:[r],e.each(r,function(r){var o=t.rebate_products_ordering[r],s=[];o&&(o=e.isArray(o)?o:[o]),e.each(o,function(e){s.push(e)}),n[r]=s}),n}function c(n,r){var a=p+"/"+n,i=t.defer(),l=n+"_"+r;return v[l]?i.resolve(v[l]):s.get(a,{date:r}).then(function(t){var n=e.extendOnly(new o.RebateDetail,t.data);v[l]=n,i.resolve(n)}).fail(function(e){i.reject(e)}),i.promise}function u(e){var n=t.defer();return s.post(m,e).then(function(e){n.resolve(e.message)},function(e){n.reject(e)}),n.promise}function d(n){var r=t.defer(),a=[],i=null,l=moment().isoWeek()+moment().format("YY"),c=[];return e.has(g.rebate_codes,n)?(i=g.rebate_codes[n],i=e.isArray(i)?i:[i],e.each(i,function(e){var t=h+"/"+(e+l);c.push(s.get(t))}),t.all(c).then(function(t){e.each(t,function(e){var t=e.data,n=new o.PromoCode;n.code=t.rebateCode,n.isClaimable=t.claimable,a.push(n)}),r.resolve(a)},function(e){r.reject(e)})):r.resolve([]),r.promise}var f=n.urls.cms.rebates,p=e.str_replace_key({":memberCode":r.member.code},n.urls.api.rebateSummaryList),m=e.str_replace_key({":memberCode":r.member.code},n.urls.api.rebateClaims),h=e.str_replace_key({":memberCode":r.member.code},n.urls.api.rebateCodes),g={},v={};return{getMondaySelection:a,getRebateDetail:c,claimInstantRebate:u,getPromotionCodesByProduct:d,getRebateProductsStructure:i}}e.Class("Pt.Services.Members.Rebate",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Contracts,Pt.Managers.HttpClient),function(e,t,n,r,o){"use strict";function s(){function s(e,n){var r=t.defer();return o.post(a,{subjectCode:e,comment:n}).then(function(t){r.resolve(e+": "+t.message)},function(e){r.reject(e)}),r.promise}var a=e.str_replace_key({":memberCode":r.member.code},n.urls.api.promotionClaims);return{claim:s}}e.Class("Pt.Services.Members.PromotionClaim",new s)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient),function(e,t,n,r,o,s){"use strict";function a(){function a(){var r=t.defer(),a=[o.get(n.urls.cms.walletConfig),o.get(i)];return t.all(a).then(function(t){var n=[],o=t[0].data.product_wallets;e.each(t[1].data,function(t){var r=e.extendOnly(new s.BonusCode,t);r.get("productCode")in o&&r.set("walletId",+o[r.get("productCode")]),n.push(r)}),r.resolve(n)}).fail(function(e){r.reject(e)}),r.promise}var i=e.str_replace_key({":memberCode":r.member.code},n.urls.api.bonusCodes);return{getAll:a}}e.Class("Pt.Services.Members.BonusCode",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient,Pt.Contracts),function(e,t,n,r,o,s){"use strict";function a(){function a(){return l()}function i(e){return l(e)}function l(){var n=t.defer(),r=d;return arguments[0]&&(r+="/"+arguments[0]),o.get(r).then(function(t){var r=[];e.each(t.data,function(t){r.push(e.extendOnly(new s.SlotGame,t))}),n.resolve(r)}).fail(function(e){n.reject(e)}),n.promise}function c(n,r){var a=t.defer(),i={gameId:n,productCode:r};return o.post(d,i).then(function(t){a.resolve(e.extendOnly(new s.SlotGame,t.data))}).fail(function(e){a.reject(e)}),a.promise}function u(e,n){var r=t.defer(),s={gameId:e,productCode:n,_method:"DELETE"};return o.post(d,s).then(function(){r.resolve(!0)}).fail(function(e){r.reject(e)}),r.promise}var d=e.str_replace_key({":memberCode":r.member.code},n.urls.api.favoriteSlotGames);return{getAll:a,getByProductCode:i,addToFavorites:c,removeFromFavorites:u}}e.Class("Pt.Services.Members.FavoriteSlotGames",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient,Pt.Contracts),function(e,t,n,r,o,s){"use strict";function a(){function a(){return l()}function i(e){return l(e)}function l(){var n=t.defer(),r=u;arguments[0]&&(r+="/"+arguments[0]);var a={dateFrom:moment(new Date/1e3).format("YYYY-MM-DD"),dateTo:moment().format("YYYY-MM-DD")};return o.get(r,a).then(function(t){var r=[];e.each(t.data,function(t){r.push(e.extendOnly(new s.SlotGame,t))}),n.resolve(r)}).fail(function(e){n.reject(e)}),n.promise}function c(n,r){var a=t.defer(),i={gameId:n,productCode:r};return o.post(u,i).then(function(t){a.resolve(e.extendOnly(new s.SlotGame,t.data))}).fail(function(e){a.reject(e)}),a.promise}var u=e.str_replace_key({":memberCode":r.member.code},n.urls.api.slotGameHistory);return{getAll:a,getByProductCode:i,addToHistory:c}}e.Class("Pt.Services.Members.SlotGameHistory",new a)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.HttpClient,Pt.Contracts),function(e,t,n,r,o,s,a){"use strict";function i(){function i(o,i){var u=t.defer(),f=o+"-"+i+"-"+d,p=e.str_replace_key({":lang":d,":oId":r.cmsId,":gameType":o,":gtc":i},n.urls.cms.games),m=a.get(f),h=function(e){var t=l(e);u.resolve({games:e,filters:t})};if(c(o,i),e.isEmpty(m)){var g=s.get(p,{});g.then(function(t){e.isEmpty(t)||a.set(f,t),h(t)}).fail(function(){u.reject([])})}else h(m);return u.promise}function l(t){var n={category:[],playlines:[],style:[]};return e.each(t,function(e){"undefined"!=typeof e.tags.category&&n.category.push(e.tags.category),"undefined"!=typeof e.tags.playlines&&n.playlines.push(e.tags.playlines),"undefined"!=typeof e.tags.style&&n.style.push(e.tags.style)}),n.category=e.uniq(e.flatten(n.category)).filter(Boolean).sort(),n.playlines=e.uniq(e.flatten(n.playlines)).filter(Boolean).sort(),n.style=e.uniq(e.flatten(n.style)).filter(Boolean).sort(),n}function c(t,n){e.each(u,function(e){d!==e&&a.remove(t+"-"+n+"-"+e)})}var u=["en","zh-hans"],d=o.get("lang")||"zh-hans";return{getGames:i,getFiltersOptions:l}}e.Class("Pt.Services.Cms.Games",new i)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.HttpClient,Pt.Managers.Cache),function(e,t,n,r,o,s,a,i){"use strict";function l(){function l(){var r=t.defer(),o="promotions-category-"+u,i=a.get(o);return e.isEmpty(i)?s.get(n.urls.cms.promotionCategories).then(function(t){e.isEmpty(t)||a.set(o,t),r.resolve(t)}).fail(function(){r.resolve([])}):r.resolve(i),r.promise}function c(o){var a=t.defer(),l=e.str_replace_key({":lang":u,":oId":r.cmsId,":category":o},n.urls.cms.promotions);return s.get(l).then(function(t){var n=[];e.each(t,function(t){var r=e.extendOnly(new i,t);e.isObject(t.image)&&r.set("bannerImage",t.image.relative_uri),t.tags.promotioncode&&r.set("promoCode",t.tags.promotioncode[0]||null),n.push(r)}),a.resolve(n)}).fail(function(){a.resolve([])}),a.promise}var u=o.get("lang")||"zh-hans";return{getPromotionsCategory:l,getPromotions:c}}e.Class("Pt.Services.Cms.Promotions",new l)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.HttpClient,Pt.Managers.Cache,Pt.Contracts.Promotion),function(e,t,n,r,o,s,a){"use strict";function i(){function s(s){var i=e.str_replace_key({":page":s,":oId":r.cmsId,":lang":o.get("lang")},n.urls.cms.page),l=t.defer();return a.get(i).then(function(t){return e.isEmpty(t)?void l.resolve({}):(l.resolve(t[0]),this)},function(e){l.reject(e)}),l.promise}return{getPage:s}}e.Class("Pt.Services.Cms.Pages",new i)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.Cache,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function s(s){var i=e.str_replace_key({":page":s,":oId":r.cmsId,":lang":o.get("lang")},n.urls.cms.banners),l=t.defer();return a.get(i).then(function(e){l.resolve(e)},function(e){l.reject(e)}),l.promise}return{get:s}}e.Class("Pt.Services.Cms.Banners",new i)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.Cache,Pt.Managers.HttpClient),function(e,t,n,r,o,s,a){"use strict";function i(){function s(s){var i=e.str_replace_key({":widget":s,":oId":r.cmsId,":lang":o.get("lang")},n.urls.cms.widget),l=t.defer();return a.get(i).then(function(t){if(!e.isEmpty(t)){var n=t._empty_.widgets[0];return l.resolve({title:n.title,content:e.unescape(n.body)}),this}l.resolve({})},function(e){l.reject(e)}),l.promise}function i(s){var i=e.str_replace_key({":widget":s,":oId":r.cmsId,":lang":o.get("lang")},n.urls.cms.widget),l=t.defer();return a.get(i).then(function(t){if(!e.isEmpty(t)){var n=t._empty_.widgets;return l.resolve(n),this}l.resolve([])},function(e){l.reject(e)}),l.promise}return{get:s,getAll:i,V2:new l}}function l(){function r(r){var o=e.str_replace_key({":widget":r},n.urls.cms.widgetV2),s=t.defer();return c[o]?s.resolve(c[o]):a.get(o).then(function(t){var n={};e.isEmpty(t.data)||e.isEmpty(t.data.data)||(n=t.data.data,c[o]=n),s.resolve(n)}).fail(function(e){s.reject(e)}),s.promise}return{get:r}}e.Class("Pt.Services.Cms.Widgets",new i);var c={}}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.Cache,Pt.Managers.HttpClient),function(e,t,n,r,o){"use strict";function s(){function s(){var e=t.defer();return i?void e.resolve():(o.getAll("Mobile-Deposit-Instruction").then(function(e){i=e})["finally"](function(){e.resolve()}),e.promise)}function a(t){var o=e.findWhere(i,{title:t});return o?n.compile(e.unescape(o.body),{liveChatLink:r.liveChat_url}):""}var i=null;return{init:s,getByMethodName:a}}e.Class("Pt.Services.Cms.DepositInstructions",new s)}(_,Q,Pt.Managers.Template,Pt.Settings,Pt.Services.Cms.Widgets),function(e,t,n,r,o,s,a){"use strict";function i(){function o(){var o=e.str_replace_key({":catId":r.infoCenter._id},n.urls.cms.infoCenterList),s=t.defer();return a.get(o).then(function(t){if(!e.isEmpty(t)){var n={};return e.each(t,function(e){n[e.slug]={name:e.name,id:e._id}}),s.resolve(n),this}s.resolve({})},function(e){s.reject(e)}),s.promise}function s(o){var s=e.str_replace_key({":catId":r.infoCenter.categoryId,":detailId":o},n.urls.cms.infoCenterDetails),i=t.defer();return a.get(s).then(function(t){return e.isEmpty(t)?void i.resolve({}):(i.resolve(t),this)},function(e){i.reject(e)}),i.promise}return{getList:o,getDetails:s}}e.Class("Pt.Services.Cms.InfoCenter",new i)}(_,Q,Pt.Config,Pt.Settings,Pt.Managers.Cookie,Pt.Managers.Cache,Pt.Managers.HttpClient),function(e){"use strict";var t={getTemplate:function(t,n){n=n||{};var r="";switch(t){default:r=e.get(this.view._default,n)}return r},render:function(e,t){return _.isEmpty(t)||$(e).html(t),arguments[2]&&"function"==typeof arguments[2]&&arguments[2](),this},_bindEvents:function(){var e=this;_.each(this.actions,function(t){var n="function"==typeof t[2]?t[2]:e[t[2]];$("body").off(t[1],t[0],n).on(t[1],t[0],{context:e},n)})},destroy:function(){_.isEmpty(this.actions)||_.each(this.actions,function(e){_.indexOf(["scroll","submit"],e[1])!==-1?$(e[0]).off(e[1],self[e[2]]):$("body").off(e[1],e[0],self[e[2]])}),_.isEmpty(this.subscription)||(_.each(this.subscription,function(e){"function"==typeof e.remove&&e.remove()}),this.subscription=[]),this._extendedDestroy()},_extendedDestroy:function(){}};_.Class("Pt.Widgets.AbstractWidgets",t)}(Pt.Managers.Template),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p,m){"use strict";function h(){this.tokenKey="pt_token",this.el="#loginModal",this.loginForm="#member-login-form",this.forgotLoginForm="#member-forgot-login-form",this.validator=null,this.actions=[[this.el,"shown.bs.modal","_onModalShowHandler"],[this.el,"hidden.bs.modal","_onModalHideHandler"],[this.el+" #member-login-form","submit","_onFormSubmit"],[this.el+" #member-forgot-login-form","submit","_onForgotFormSubmit"],[this.el+" .button-sign-up","click","_onSigUpClick"],[this.el+" .button-forgot-password","click","_onForgotPasswordClick"]]}t.Class("Pt.Widgets.BaseLogin",h),h.prototype=t.extend(m,{init:function(){var n=this;e("#loginModal .modal-dialog").html(d.get("web.login")),t.delay(function(){n._bindEvents()},80)},_instantiateValidator:function(e,t){null!==this.validator&&(this.validator.destroy(),this.validator=null),this.validator=new l(e,t),this.validator.init()},_onModalShowHandler:function(e){var t=e.data.context;t._instantiateValidator(t.loginForm,r.validation.login)},_onModalHideHandler:function(t){var n=t.data.context;null!=n.validator&&(n.validator.destroy(),n.validator=null),e(n.loginForm).show(),e(n.forgotLoginForm).hide(),e(n.loginForm)[0].reset(),e(n.forgotLoginForm)[0].reset()},_onSigUpClick:function(t){t.preventDefault();var n=t.data.context;e(n.el).modal("hide"),u.navigate("/signup")},_onForgotPasswordClick:function(t){t.preventDefault();var n=t.data.context;e(n.loginForm).hide(),e(n.forgotLoginForm).show(),n._instantiateValidator(n.forgotLoginForm,r.validation.forgotLogin)},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess)},_onValidationSuccess:function(e){o.start();var r=t.findWhere(e,{name:"username"}),s=t.findWhere(e,{name:"password"}),i=p.Session.login(r.value,s.value);i.then(function(e){f.trackEvent(f.eventMap.MEMBER_ACTIONS,f.actionMap.LOG_IN_SUCCESS,r.value),c.set({name:n.tokenKey,value:e.token}),c.set({name:"s",value:e.sessionId}),location.reload()}).fail(function(e){t.has(e,"ErrorMessage")&&f.trackEvent(f.eventMap.MEMBER_ACTIONS,f.actionMap.LOG_IN_FAIL,e.ErrorMessage),o.done(),a.show(e)})},_onForgotFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onForgotValidationSuccess)},_onForgotValidationSuccess:function(n,r){o.start();var i=t.findWhere(n,{name:"memberCode"}),l=t.findWhere(n,{name:"email"}),c=p.Session.forgotLogin(i.value,l.value);c.then(function(t){s.success(t.message),e(r.forgotLoginForm)[0].reset()}).fail(function(e){o.done(),a.show(e)})},_extendedDestroy:function(){"function"==typeof this.validator&&this.validator.destroy(),this.validator=null}})}(jQuery,_,Pt.Settings,Pt.Rules,Pt.Helpers.Nprogress,Pt.Helpers.Notify,Pt.Helpers.Error,Pt.Managers.Broadcaster,Pt.Managers.Validation,Pt.Managers.Cookie,Pt.Managers.Router,Pt.Managers.Template,Pt.Managers.Analytics,Pt.Services.Members,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a,i){"use strict";function l(){this.view={},this.notifyBadge="[data-js=notify-badge]",this.pmBadgeCount=".pm-badge-count",this.actions=[[".btn-notify","click","_notifyClickHandler"]],r.subscribe(r.getChannel("pageLoaded"),"_onPageLoad",this)}var c=null;t.Class("Pt.Widgets.BaseNotifications",l),l.prototype=t.extend(i,{init:function(){return this._bindEvents(),this},fetchAnnouncements:function(){return a.Announcements.getAnnouncements().then(t.bind(this._onAnnouncementReady,this)),this},fetchPrivateMessage:function(){n.member.isLoggedIn&&a.PrivateMessage.getUnread().then(t.bind(this._onGetUnreadReady,this))},_onGetUnreadReady:function(t){var n=this,r=null,o=function(){var o=e(n.pmBadgeCount);return o.length&&(clearInterval(r),o.html(t.unread)),this};t.unread>0&&(r=setInterval(o,400))},_onAnnouncementReady:function(n){var r=this,o=null,s=function(){var t=e(r.notifyBadge);return t.length&&(clearInterval(o),t.addClass("on"),t.closest("button").addClass("on")),this};!t.isEmpty(n)&&this.hasUnread(n)&&(o=setInterval(s,400))},_notifyClickHandler:function(n){var r=e("#notificationModal"),a=n.data.context;return!t.isEmpty(c)&&(r.find(".modal-body").html(o.get("web.notification",{notifications:c})),s.set("pt-announcements-ids",a.getAllAnnouncementIds(c)),e(a.notifyBadge).removeClass("on"),void r.modal("show"))},_onPageLoad:function(){this.fetchAnnouncements(),this.fetchPrivateMessage()},hasUnread:function(e){var n=this.getAllAnnouncementIds(e),r=s.get("pt-announcements-ids");return c=e,!t.isEqual(n,r)},getAllAnnouncementIds:function(e){var n=[];return t.each(e,function(e){n.push(e.id)}),n}})}(jQuery,_,Pt.Settings,Pt.Managers.Broadcaster,Pt.Managers.Template,Pt.Managers.Cache,Pt.Services.Members,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a,i,l,c){"use strict";function u(){this.view={},this.el="#header",this.notifyBadge="[data-js=notify-badge]",this.actions=[[this.el+" #nav-toggle-button","click","_navButtonClickHandler"],["#subnav a","click","_linkClickHandler"],[".header-link","click","_headerLinkClickHandler"],["#subnav","shown.bs.collapse","_onSubNavOpen"],[".subnav-open","click","_closeOnBlockClick"]],o.subscribe(o.getChannel("pageLoaded"),"_onPageLoad",this),o.subscribe(o.getChannel("orientationChanged"),"_adjustSubnav",this)}t.Class("Pt.Widgets.BaseHeader",u),u.prototype=t.extend(c,{activate:function(){this._bindEvents()},render:function(t,n){return e(t).html(n),this},_closeSub:function(){e("#subnav").collapse("hide"),e("[canvas]").removeClass("subnav-open")},_onSubNavOpen:function(t){e("[canvas]").addClass("subnav-open")},_closeOnBlockClick:function(e){e.data.context._closeSub()},_navButtonClickHandler:function(e){e.data.context._closeSub(),s.toggle("left",e)},_linkClickHandler:function(t){var n=e(this),r=n.attr("href");if("allowDefault"!==n.data("action"))return t.preventDefault(),t.data.context._closeSub(),a.navigate(r)},_headerLinkClickHandler:function(t){t.preventDefault();var r=e(this),o=r.attr("href"),s=r.data("appmodule");return"undefined"!=typeof s&&s!==n.module?(location.href=o,this):void a.navigate(o)},_onPageLoad:function(e){return this._closeSub(),t.isEmpty(e.header)?this.render("#header",i.get("web.header",{centerButton:i.get("web.logoButton"),leftButton:i.get("web.burgerIconButton"),rightButton:i.get("web.headerLangButton")})):(this.render("#header",e.header.main),this.render("#subnav",i.get("web.headerSub",{subMenus:e.header.sub})),void this._adjustSubnav())},_adjustSubnav:function(){var t=e("#subnav").find(".list-group"),n=window.innerHeight;return!!t.length&&void t.css({"max-height":n-100+"px","overflow-y":"auto"})}})}(jQuery,_,Pt.Settings,Pt.Config,Pt.Managers.Broadcaster,Pt.Managers.SlideNavigation,Pt.Managers.Router,Pt.Managers.Template,Pt.Services.Members,_.clone(Pt.Widgets.AbstractWidgets)),
function(t,n,r,o,s,a){"use strict";function i(){this.el="#sidenav",this.activeEl={},this.actions=[[this.el+" a","click","_navButtonClickHandler"],[".footer-navigation a","click","_navButtonClickHandler"],[".page-navigator","click","_onPageNavigatorClick"]],s.subscribe(s.getChannel("slideNavigation"),"_slidNavEventHandler",this)}n.Class("Pt.Widgets.BaseNavigation",i),i.prototype=n.extend(a,{init:function(){this._bindEvents()},_slidNavEventHandler:function(e){if("closed"===e.event){var n=t("body"),r=t("li.dropdown.open.active");n.removeClass("open-subnav"),r.removeClass("open active")}},_navButtonClickHandler:function(e){e.preventDefault();var s=t("body"),a=t(this),i=e.data.context,l=a.attr("href"),c=a.data("action"),u=a.data("appmodule"),d=a.data("manner"),f=a.parent();if(f.hasClass("dropdown"))return n.isMatch(e.data.context.activeEl,a)?(s.toggleClass("open-subnav"),f.toggleClass("open active"),this):(e.data.context.activeEl=a,s.addClass("open-subnav"),f.addClass("open active").siblings("li").removeClass("open active"),this);if("allowDefault"===c)return location.href=l,this;var p=i._actionHandler(a,c,l)||i._mannerHandler(a,d,l);if(!p&&!n.isEmpty(l)&&"#"!=l){if("undefined"!=typeof u&&u!==r.module)return location.href=l,this;o.navigate(l)}},_actionHandler:function(e,n,o){var s={authenticate:function(){return!r.member.isLoggedIn&&(t("#loginModal").modal("show"),!0)},deAuthorize:function(){return location.replace("/"),location.href=o,!0},popUp:function(){return window.open(o,e.data("window"),"type=fullWindow"),!0}};return"undefined"!=typeof s[n]&&s[n]()},_mannerHandler:function(t,r,o){var s={launcher:function(){return!n.isEmpty(o)&&"#"!=o&&(window.open(e.target.href,"game-launcher","type=fullWindow"),!0)}};return"undefined"!=typeof s[r]&&s[r]()},_onPageNavigatorClick:function(e){var r=t(this).attr("href");n.isEmpty(r)||"#"==r||o.navigate(r)}})}(jQuery,_,Pt.Settings,Pt.Managers.Router,Pt.Managers.Broadcaster,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r){"use strict";function o(){this.el="#langModal",this.actions=[[this.el+" a","click","_clickHandler"]]}t.Class("Pt.Widgets.BaseLanguage",o),o.prototype=t.extend(r,{init:function(){this._bindEvents()},_clickHandler:function(t){t.preventDefault();var r=e(this).attr("href");n.set({name:"lang",value:r}),location.reload()}})}(jQuery,_,Pt.Managers.Cookie,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n){"use strict";function r(){this.view={_default:"web.banner"},this.el=" .carousel-slide"}t.Class("Pt.Widgets.BaseBanners",r),r.prototype=t.extend(n,{activate:function(n){e(this.el).length&&(t.extend(n,{autoplay:!0,dots:!0}),e(this.el).slick(n))}})}(jQuery,_,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r){"use strict";function o(){this.view={_default:"web.gameFilters"},this.el=".game-filter ",this.searchTimeout=null,this.actions=[[this.el+' input[name="game-query"]',"keyup","_searchHandler"],[this.el+" .btn-clear-form","click","_filterChangeHandler"],[this.el+" select","change","_filterChangeHandler"]]}t.Class("Pt.Widgets.BaseFilters",o),o.prototype=t.extend(r,{activate:function(e){this._bindEvents()},_searchHandler:function(t){var r=e(this),o=t.data.context;clearTimeout(o.searchTimeout),o.searchTimeout=setTimeout(function(){n.publish(n.getChannel("gameFilters"),{type:"search",data:r.val()})},500)},_filterChangeHandler:function(){e('input[name="game-query"]').val(""),n.publish(n.getChannel("gameFilters"),{type:"filters",data:{category:e("select.category").val(),playlines:e("select.playlines").val(),style:e("select.style").val()}})},_extendedDestroy:function(){this.searchTimeout=null}})}(jQuery,_,Pt.Managers.Broadcaster,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a){"use strict";function i(){this.view={_default:"funds.balances"},this.el=".balances",this.elWallet=".balances-wallet",this.wallets=null,this.actions=[[this.el+" .icon-refresh","click","_refreshHandler"],[this.el+" .btn-show-wallets","click","_showWalletHandler"]],this.subscription=[],this.activated=!1}var l=[];n.Class("Pt.Widgets.BaseBalances",i),i.prototype=n.extend(a,{activate:function(e){this.activated||(this.subscription.push(r.subscribe(r.getChannel("funds.walletSelected"),"_onWalletSelected",this),r.subscribe(r.getChannel("funds.transferCompleted"),"_onTransferComplete",this)),this.activated=!0),this.wallets=e,this.getWalletBalance(),this._bindEvents()},getWalletBalance:function(){var r=this,o=[];return this._setUserExperience(n.trans("global.processing")),n.isEmpty(l)?(n.each(this.wallets,function(t){e(".wallet-"+t.id).css("opacity",.2),o.push(s.getByWalletId(t.id))}),t.all(o).then(function(e){l=e,r._populate(e)}),this):(this._populate(l),this)},_populate:function(t){var r=this,o=0;n.each(t,function(t){o+=n.toFloat(t.balance.amount),e(".wallet-"+t.balance.wallet_id).css("opacity",1).find(".value").html(t.balance.amount),e(r.el+" .total-balance").html(n.toCurrency(o))}),r._setUserExperience("default")},_setUserExperience:function(t){return t=t||"default","default"==t?(e(this.el+" .wallet-wrapper .label").removeClass("animated-loading").text(n.trans("funds.balance")),e(this.el+" .total-balance").css("opacity",1),this):(e(this.el+" .wallet-wrapper .label").addClass("animated-loading").text(n.trans("funds.updating_balance")),e(this.el+" .total-balance").css("opacity",.2),this)},_refreshHandler:function(e){e.preventDefault();var t=e.data.context;l=[],t.getWalletBalance()},_showWalletHandler:function(t){t.preventDefault();var n=t.data.context;!e(n.elWallet).hasClass("in")},_onWalletSelected:function(){void 0},_onTransferComplete:function(){l=[],this.getWalletBalance()},_extendedDestroy:function(){this.wallets=null,this.activated=!1}})}(jQuery,Q,_,Pt.Managers.Broadcaster,Pt.Services.Members.Wallet,Pt.Services.Members.Balance,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a,i){"use strict";function l(){this.view="funds.bonusCodes",this.el="#bonus-code-widget",this.elWallet=".balances-wallet",this.wallets=null,this.actions=[["#bonusCodeSelection","change","_selectBonusCode"]],this.$container=null,this.subscription=[]}n.Class("Pt.Widgets.BaseBonusCodeWidget",l),l.prototype=n.extend(i,{activate:function(t){return this.$container=e(t),this.subscription.push(r.subscribe(r.getChannel("funds.walletSelected"),"_onWalletSelected",this),r.subscribe(r.getChannel("funds.transferCompleted"),"_clearBonusCodeList",this)),this._bindEvents(),this},_onWalletSelected:function(e){"transferFrom"in e&&(0===e.transferFrom?this._showBonusCodeList():this._clearBonusCodeList())},_showBonusCodeList:function(){var t=this;return 1===e("#bonus-code-widget").length?void t.$container.show():(a.start(),void s.getAll().then(function(e){var n=o.get(t.view,{bonusCodes:e});t.$container.html(n).show()})["finally"](function(){a.done()}))},_selectBonusCode:function(){var t=e(this),n=t.val(),o=t.find(":selected").data("wallet-id");r.publish(r.getChannel("funds.bonusCodeSelected"),{bonusCode:n,walletId:o})},_clearBonusCodeList:function(){this.$container.hide(),e("#bonusCodeSelection").val("")},_extendedDestroy:function(){this.wallets=null}})}(jQuery,Q,_,Pt.Managers.Broadcaster,Pt.Managers.Template,Pt.Services.Members.BonusCode,Pt.Helpers.Nprogress,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a){"use strict";function i(){this.modalEl="#genericModal",this.baseEl=".qr-code-decode",this.actions=[["#qr-image-decode","change","_onImageChange"],[".btn-decode-qr","click","_onDecodeClick"]]}t.Class("Pt.Widgets.BaseQrCode",i),i.prototype=t.extend(a,{init:function(){this._bindEvents()},decode:function(){var t=e(this.modalEl);t.find(".modal-body").html(r.get("web.qrCodeDecode")),e(this.modalEl).modal("show")},_onDecodeClick:function(){o.decode(e(".qr-image-decode")).then(function(e){s.success(t.trans("global.qr_decode_success")),t.delay(function(){location.href=e.value},1400)}).fail(function(e){s.error(e.error)})},_onImageChange:function(t){var n=t.data.context,r=t.target.value,o=e("#file-name-display"),s=e("#attach-file-display");t.target.value?(s.hide(),o.show().html(r)):(s.show(),o.hide()),n._previewImage()},_previewImage:function(){o.getImage(e(".qr-image-decode")).then(function(t){var n=e('<img src="'+t.file+'" style="margin: auto">').on("load",function(){e(".qr-image-preview").html(n)})})}})}(jQuery,_,Pt.Settings,Pt.Managers.Template,Pt.Helpers.QrCode,Pt.Helpers.Notify,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n,r,o,s,a){"use strict";function i(){this.el="[data-js=captcha-container]",this.view={standard:"web.captcha"},this.actions=[["[data-js=refresh-captcha]","click","_onRefreshCaptcha"]]}t.Class("Pt.Widgets.BaseCaptcha",i),i.prototype=t.extend(a,{activate:function(){if(!t.booleanString(n.enable_captcha))return this;if(e(this.el).length){var a=s.Template.get(this.view.standard,{path:r.urls.cms.captcha+"?v="+t.random(1e3,9999),isEnable:t.booleanString(Pt.Settings.enable_captcha)});t.extend(o.validation.signup,{captcha:{presence:{message:"^"+t.trans("errors.captcha_required")}}}),this.render(this.el,a)._bindEvents()}},_onRefreshCaptcha:function(e){var t=e.data.context;t.activate()}})}(jQuery,_,Pt.Settings,Pt.Config,Pt.Rules,Pt.Managers,_.clone(Pt.Widgets.AbstractWidgets)),function(e,t,n){"use strict";function r(){this.el='[data-js="tab-slider"]',this.defaults={slidesToShow:1,slidesToScroll:1,autoplay:!1,infinite:!1,variableWidth:!0,dots:!1}}t.Class("Pt.Widgets.BaseTabSlider",r),r.prototype=t.extend(n,{init:function(){var t=e(this.el),n=this.defaults;n.initialSlide=+e("li",t).index(e(".nav-link.active").closest("li")),t.slick(n)}})}(jQuery,_,_.clone(Pt.Widgets.AbstractWidgets)),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Login",new t)}(Pt.Widgets.BaseLogin),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Notifications",new t)}(Pt.Widgets.BaseNotifications),function(e){function t(){var t="#header";return new e(t)}_.Class("Pt.Widgets.Header",new t)}(Pt.Widgets.BaseHeader),function(e,t){"use strict";function n(){function n(){t.call(this)}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,_.extend(n.prototype,{_actionHandler:function(t,n,r){var o={authenticate:function(){return!e.member.isLoggedIn&&($("#loginModal").modal("show"),!0)},deAuthorize:function(){return location.replace("/"),location.href=r,!0},popUp:function(){return"function"==typeof window.LC_API.open_chat_window?(window.LC_API.open_chat_window(),!0):(window.open(r,t.data("window"),"type=fullWindow"),!0)}};return"undefined"!=typeof o[n]&&o[n]()}}),new n}_.Class("Pt.Widgets.Navigation",new n)}(Pt.Settings,Pt.Widgets.BaseNavigation),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Language",new t)}(Pt.Widgets.BaseLanguage),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Banners",new t)}(Pt.Widgets.BaseBanners),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Filters",new t)}(Pt.Widgets.BaseFilters),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Balances",new t)}(Pt.Widgets.BaseBalances),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.BonusCodeWidget",new t)}(Pt.Widgets.BaseBonusCodeWidget),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.QrCode",new t)}(Pt.Widgets.BaseQrCode),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.Captcha",new t)}(Pt.Widgets.BaseCaptcha),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Widgets.TabSlider",new t)}(Pt.Widgets.BaseTabSlider),function(e,t,n,r,o){"use strict";function s(){}s.prototype={run:function(e){var r=this,o=t.defer();if(n.isEmpty(e))o.resolve(!0);else{var s=[];e=n.isString(e)?[e]:e,n.each(e,function(e){s.push(r[e]())}),t.all(s).then(function(e){o.resolve(e)})}return o.promise},forceLogin:function(){var e=t.defer();return n.isEmpty(o.Cookie.get(r.tokenKey))?(e.reject(),location.reload()):e.resolve(!0),e.promise}},n.Class("Pt.Middleware",new s)}(jQuery,Q,_,Pt.Settings,Pt.Managers),function(e,t,n,r,o,s,a){"use strict";var i={statusCodes:{pending:"pending",successful:"success",failed:"failed",declined:"declined"},activate:function(e,t){if(this.deactivate(e))return this;var n=this;a.run(this.middleware).then(function(){s.Nprogress.start(),o.setContext(e),n.nexter(t,e)})},nexter:function(e,t){"function"==typeof this.resolve?this.resolve(e,t):e()},render:function(e){return s.Nprogress.start(),r.render(e),this.renderComplete(),this._bindEvents(),this},renderComplete:function(){r.show(this)},deactivate:function(e){return!!n.isSameRoute(o.getContext(),e)||(r.handle(this),!1)},destroy:function(){this.header=null,this._destroyEvents(),this._extendedDestroy()},_extendedDestroy:function(){},_bindEvents:function(){var t=this;return n.isEmpty(this.actions)||n.each(this.actions,function(r){n.indexOf(["scroll","submit"],r[1])!==-1?e(r[0]).off(r[1],t[r[2]]).on(r[1],{context:t},t[r[2]]):e("body").off(r[1],r[0],t[r[2]]).on(r[1],r[0],{context:t},t[r[2]])}),this},_destroyEvents:function(){var t=this;return n.isEmpty(this.actions)||n.each(this.actions,function(r){n.indexOf(["scroll","submit"],r[1])!==-1?e(r[0]).off(r[1],t[r[2]]):e("body").off(r[1],r[0],t[r[2]])}),n.isEmpty(this.subscription)||(n.each(this.subscription,function(e){"function"==typeof e.remove&&e.remove()}),this.subscription=[]),n.isEmpty(this.widgets)||(n.each(this.widgets,function(e){"function"==typeof e.destroy&&e.destroy()}),this.widgets=[]),n.isEmpty(this.gateway)||"function"!=typeof this.gateway.destroy||(this.gateway.destroy(),this.gateway=null),null!==this.validator&&"undefined"!=typeof this.validator&&"function"==typeof this.validator.destroy&&(this.validator.destroy(),this.validator=null),this}};n.Class("Pt.Controllers.AbstractController",i)}(jQuery,Q,_,Pt.Managers.Page,Pt.Managers.Router,Pt.Helpers,Pt.Middleware),function(e,t,n,r,o,s,a,i){"use strict";function l(e){this.view={error404:"web.error404"},this.el=e||".error",this.actions=[]}t.Class("Pt.Controllers.BaseErrorController",l),l.prototype=t.extend(i,{error404:function(){this.errorTemplate=a.get(this.view.error404),this.render(this.errorTemplate)}})}(jQuery,_,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c){"use strict";function u(){this.view="web.home",this.el=".home",this.banners=[],this.menu=[],this.header={main:i.get("web.header",{leftButton:i.get("web.burgerIconButton"),centerButton:i.get("web.logoButton"),rightButton:i.get("web.headerLangButton")})},this.actions=[[this.el+" a","click","_anchorClickHandler"]]}t.Class("Pt.Controllers.BaseHomeController",u),u.prototype=t.extend(c,{resolve:function(e){var t=this,r=[l.Banners.get("home"),l.Widgets.V2.get("mobile_home_screen_menu")];n.all(r).then(function(e){t.banners=e[0],t.menu=e[1]})["finally"](function(){e()})},init:function(){this.widgets=[a],this.homeTemplate=i.get(this.view,{banners:a.getTemplate(null,{banners:this.banners}),loggedIn:r.member.isLoggedIn}),this.render(this.homeTemplate)},renderComplete:function(){a.activate({}),s.show(this)},_anchorClickHandler:function(n){n.preventDefault();var r=e(this),s=r.attr("href");if(r.hasClass("game-card")&&!r.data("gamesupport")){var a=e("#genericModal");return a.find(".modal-body").html(i.get("web.slotSupport")),a.modal(),this}return"allowDefault"===r.data("action")?(location.href=s,this):"popUp"===r.data("action")?(window.open(n.currentTarget.href,r.data("window"),"type=fullWindow"),this):void(t.isEmpty(s)||o.navigate(s))},_extendedDestroy:function(){this.banners=[]}})}(jQuery,_,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Widgets.Banners,Pt.Managers.Template,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p,m,h,g){"use strict";function v(){this.view="web.loginPage",this.el=".loginPage",this.loginForm="#member-login-form",this.forgotLoginForm="#member-forgot-login-form",this.validator=null,this.actions=[[this.el+" #member-login-form","submit","_onFormSubmit"],[this.el+" #member-forgot-login-form","submit","_onForgotFormSubmit"],[this.el+" .button-forgot-password","click","_onForgotPasswordClick"],[this.el+" .button-back-to-login","click","_onBackToLoginClick"]]}t.Class("Pt.Controllers.BaseLoginController",v),v.prototype=t.extend(g,{init:function(){this.render(f.get(this.view,{language:d.get("lang")})),this._instantiateValidator(this.loginForm,r.validation.login)},_onForgotPasswordClick:function(t){t.preventDefault();var n=t.data.context;e(n.loginForm).hide(),e(n.forgotLoginForm).show(),n._instantiateValidator(n.forgotLoginForm,r.validation.forgotLogin)},_onBackToLoginClick:function(t){t.preventDefault();var n=t.data.context;e(n.loginForm).show(),e(n.forgotLoginForm).hide(),n._instantiateValidator(n.loginForm,r.validation.login)},_instantiateValidator:function(e,t){null!==this.validator&&(this.validator.destroy(),this.validator=null),this.validator=new c(e,t),this.validator.init()},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onForgotFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onForgotValidationSuccess)},_onValidationSuccess:function(e){s.start();var n=t.findWhere(e,{name:"username"}),r=t.findWhere(e,{name:"password"}),a=m.Session.login(n.value,r.value);a.then(function(e){p.trackEvent(p.eventMap.MEMBER_ACTIONS,p.actionMap.LOG_IN_SUCCESS,n.value),d.set({name:o.tokenKey,value:e.token}),d.set({name:"s",value:e.sessionId});var r=t.getParameterByName("url");return t.isEmpty(r)?void(location.href="/"):location.href=r}).fail(function(e){t.has(e,"ErrorMessage")&&p.trackEvent(p.eventMap.MEMBER_ACTIONS,p.actionMap.LOG_IN_FAIL,e.ErrorMessage),s.done(),i.show(e)})},_onForgotValidationSuccess:function(n,r){s.start();var o=t.findWhere(n,{name:"memberCode"}),l=t.findWhere(n,{name:"email"}),c=m.Session.forgotLogin(o.value,l.value);c.then(function(t){a.success(t.message),e(r.forgotLoginForm)[0].reset()}).fail(function(e){s.done(),i.show(e)})},_extendedDestroy:function(){"function"==typeof this.validator&&this.validator.destroy(),this.validator=null}})}(jQuery,_,Q,Pt.Rules,Pt.Settings,Pt.Helpers.Nprogress,Pt.Helpers.Notify,Pt.Helpers.Error,Pt.Managers.Router,Pt.Managers.Validation,Pt.Managers.Page,Pt.Managers.Cookie,Pt.Managers.Template,Pt.Managers.Analytics,Pt.Services.Members,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(){this.view="web.downloads",this.page={},this.el=".download",this.actions=[[this.el+" .dl-card a","click","_downloadClickHandler"]]}_.Class("Pt.Controllers.BaseDownloadsController",d),d.prototype=_.extend(u,{resolve:function(e){var t=this;c.Pages.getPage("mobileDownload").then(function(e){_.isEmpty(e)||(t.page=e)})["finally"](function(){e()})},init:function(){return this.header={main:s.get("web.header",{leftButton:s.get("web.burgerIconButton"),centerButton:s.get("web.headerTitle",{title:_.trans("global.nav_downloads")}),rightButton:s.get("web.headerLangButton")}),sub:""},_.isEmpty(this.page)?void this.render(s.get("web.staticPage",{page:s.get("web.error404")})):void this.render(s.get(this.view,{content:_.unescape(this.page.description)}))},renderComplete:function(){o.show(this)},_downloadClickHandler:function(t){t.preventDefault();var n=e(this).attr("href"),r=e(this).data("action");if("#"===n||_.isEmpty(n))return this;var o={popUp:function(){return window.open(n,"mobile-download","type=fullWindow"),self}};return"undefined"!=typeof o[r]?o[r]():void(location.href=n)},_extendedDestroy:function(){this.page=null,this.header=null}})}(jQuery,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l){"use strict";function c(){this.page={},this.actions=[]}t.Class("Pt.Controllers.BaseStaticPageController",c),c.prototype=t.extend(l,{resolve:function(e,n){var r=n.params.page,o=this;i.getPage(r).then(function(e){t.isEmpty(e)||(o.page=e)})["finally"](function(){e()})},init:function(){return this.header={main:a.get("web.header",{leftButton:a.get("web.backIconButton",{link:"javascript:history.back()"}),centerButton:a.get("web.logoButton"),rightButton:a.get("web.headerLangButton")})},t.isEmpty(this.page)?void this.render(a.get("web.staticPage",{page:a.get("web.error404")})):void this.render(a.get("web.staticPage",{page:a.compile(t.unescape(this.page.description))}))},maintenance:function(){return this.header={main:a.get("web.header",{leftButton:a.get("web.burgerIconButton"),centerButton:a.get("web.logoButton"),rightButton:a.get("web.headerLangButton")})},t.isEmpty(this.page)?void this.render(a.get("web.staticPage",{page:a.get("web.error404")})):void this.render(a.get("web.staticPage",{page:a.compile(t.unescape(this.page.description))}))},renderComplete:function(){s.show(this)},_extendedDestroy:function(){this.page=null}})}(jQuery,_,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Services.Cms.Pages,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(e){this.view={slot:"web.slots",slotCards:"web.slotCards",dashboard:"web.slotDashboard"},this.methodMap={betsoft:"default",gpi:"default",gspot:"default",isoftbet:"default",png:"default",mgs:"default",ctxm:"default",ttg:"default",pt:"default",qtech:"default",uc8:"default",pplay:"default"},this.noHttps=["pt"],this.filters=null,this.games=[],this.el=e||".slot",this.actions=[[this.el+" .btn-try-now","click","_tryNowClickHandler"],[this.el+" .btn-play-now","click","_playNowClickHandler"],[this.el+" .btn-favorite","click","_onFavoriteButtonClick"],[".page-canvas.active","scroll","_pageScrollHandler"]],this.widgets=[],this.subscription=[]}_.Class("Pt.Controllers.BaseSlotsController",p),p.prototype=_.extend(f,{resolve:function(e,t){this.clubs=_.sortByReference(r.slotsOrder,n.clubNames,"key");var o=this,s=t.params.clubs;return this.club=s,s?void d.Games.getGames("slot_machines",s).then(function(t){return o.filters=t.filters,o.games=_.clone(t.games),r.member.isLoggedIn?(u.FavoriteSlotGames.getByProductCode(s).then(function(e){_.each(e,function(e){var t=_.findWhere(o.games,{game_id:e.gameId});_.isEmpty(t)||(t.isFavorite="active")}),o.games=_.sortBy(o.games,"isFavorite")})["finally"](function(){e()}),!0):void e()}):void d.Widgets.V2.get("mobile_slots_menu").then(function(e){o.clubs=e.menu_item})["finally"](function(){e()})},init:function(e){if(this.widgets.push(c),this.subscription.push(i.subscribe(i.getChannel("gameFilters"),"_gameFiltersHandler",this)),"undefined"==typeof e.params.clubs)return this.index(e),!0;if("undefined"==typeof _.findWhere(this.clubs,{key:e.params.clubs}))return o.redirect("/error/404"),!0;if("default"===this.methodMap[e.params.clubs]){var t=_.findWhere(this.clubs,{key:e.params.clubs})||{};this.header={main:a.get("web.header",{leftButton:a.get("web.burgerIconButton"),centerButton:a.get("web.navButton",{title:t.title}),rightButton:a.get("web.headerLangButton")}),sub:this.clubs};var n=a.get(this.view.slot,{club:t.key,gameFilters:c.getTemplate("",this.filters),cards:a.get(this.view.slotCards,{gameList:this.games})});return this.render(n),this}return"function"==typeof this[e.params.clubs]?(this[e.params.clubs](e),this):void o.redirect("/")},index:function(){this.header={main:a.get("web.header",{leftButton:a.get("web.burgerIconButton"),centerButton:a.get("web.headerTitle",{title:_.trans("global.nav_slots")}),rightButton:a.get("web.headerLangButton")}),sub:""},this.render(a.get(this.view.dashboard,{games:this.clubs}))},renderComplete:function(){s.show(this),c.activate(this)},_pageScrollHandler:function(e){},_onFavoriteButtonClick:function(t){t.stopPropagation();var n=(t.data.context,e(this)),r=e(this).parent().data("gameid"),o=e(this).closest(".card-container").data("club");return n.hasClass("active")?(n.removeClass("active"),u.FavoriteSlotGames.removeFromFavorites(r,o).then(function(){n.removeClass("active")}).fail(function(){n.addClass("active")}),!0):(n.addClass("active"),void u.FavoriteSlotGames.addToFavorites(r,o).then(function(){n.addClass("active")}).fail(function(){n.removeClass("active")}))},_tryNowClickHandler:function(t){t.preventDefault();var n=t.data.context,r=e(this).attr("href"),o=t.target.href;_.isEmpty(r)||"#"==r||(_.contains(n.noHttps,n.club)&&(o=o.replace("https:","http:")),window.open(o,"slot-game-launcher","type=fullWindow"))},_playNowClickHandler:function(t){if(t.preventDefault(),r.member.isLoggedIn){var n=e(this).attr("href"),o=t.target.href;return _.isEmpty(n)||"#"==n||(_.contains(self.noHttps,self.club)&&(o=o.replace("https:","http:")),window.open(o,"slot-game-launcher","type=fullWindow")),this}e("#loginModal").modal()},_gameFiltersHandler:function(e){var t=this.games;switch(e.type){case"search":var n=e.data.toLowerCase();n&&(t=_.filter(this.games,function(e){var t=e.title.toLowerCase();return t.indexOf(n)>-1}));break;case"filters":t=_.filter(this.games,function(t){var n=!1,r=!1,o=!1;return"all"!=e.data.category?"undefined"!=typeof t.tags.category&&(n=_.contains(t.tags.category,e.data.category)):n=!0,"all"!=e.data.playlines?"undefined"!=typeof t.tags.playlines&&(r=_.contains(t.tags.playlines,e.data.playlines)):r=!0,"all"!=e.data.style?"undefined"!=typeof t.tags.style&&(o=_.contains(t.tags.style,e.data.style)):o=!0,n&&r&&o})}this._renderFiltered(t)},_renderFiltered:function(t){var n=a.get(this.view.slotCards,{gameList:t});e(".slot .card-container").html(n)},_extendedDestroy:function(){this.filters=null,this.games=[],this.header=null}})}(jQuery,Q,Pt.Config,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Members,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p){"use strict";function m(e){this.view={main:"web.casino",download:"web.casinoDownload"},this.games=[],this.dlPage=null,this.menu=[],this.el=e||".casino",this.actions=[[this.el+" .dl-button","click","_downloadClickHandler"],[this.el+" .btn-card-clicker","click","_onCardClick"]]}_.Class("Pt.Controllers.BaseCasinoController",m),m.prototype=_.extend(p,{resolve:function(e,t){var n=this;return"undefined"!=typeof t.params.clubs?(f.Widgets.getAll("mobile-casino-download-page").then(function(e){n.dlPage=_.findWhere(e,{title:"mobile-casino-"+t.params.clubs+"-download-page"}).body,n.dlPage=_.unescape(n.dlPage)})["finally"](function(){e()}),this):void f.Widgets.V2.get("mobile_casino_menu").then(function(e){n.menu=n._translateContract(e)})["finally"](function(){e()})},init:function(e){return"undefined"==typeof e.params.clubs?this.index(e):this.downloadPage(e)},index:function(){this.header={main:i.get("web.header",{leftButton:i.get("web.burgerIconButton"),centerButton:i.get("web.headerTitle",{title:_.trans("global.nav_casino")}),rightButton:i.get("web.headerLangButton")}),sub:""},this.render(i.get(this.view.main,{casinoGames:this.menu}))},downloadPage:function(e){var t={"gpi-premiere":"gpi_casino_premiere",gpi:"gpi_casino",pt:"palazzo_casino"},o=n.downloads[_.mobileDevice()+"_"+t[e.params.clubs]];return this.header={main:i.get("web.header",{leftButton:i.get("web.backIconButton",{link:"javascript:history.back()"}),centerButton:i.get("web.headerTitle",{title:_.trans("global.nav_casino")}),rightButton:i.get("web.headerLangButton")}),sub:""},"undefined"==typeof this.dlPage?(u.error(_.trans("errors.page_not_found")),history.back(),this):void this.render(i.compile(this.dlPage,{installer:"undefined"==typeof o?"#":o,club:_.findWhere(r.casino,{key:t[e.params.clubs]}).title}))},renderComplete:function(){a.show(this)},_onCardClick:function(){var t=e(this).attr("href"),n=e(this).data("gamekey");if("#"===t||_.isEmpty(t))return this;var o=_.findWhere(r.casino,{key:n})||{deviceSupport:[]},a=_.contains(o.deviceSupport,_.mobileDevice());if(!a){var l=e("#genericModal");return l.find(".modal-body").html(i.get("web.casinoSupport")),l.modal(),this}s.navigate(t)},_downloadClickHandler:function(t){t.preventDefault();var n=t.data.context,r=e(this).attr("href"),o=e(this).data("action");if("#"===r||_.isEmpty(r))return n;var s={popUp:function(){return window.open(r,"casino-download","type=fullWindow"),n}};return"undefined"!=typeof s[o]?s[o]():(location.href=r,n)},_translateContract:function(e){if(_.isEmpty(e))return r.casino;var t=[];return _.each(e.menu_item,function(e){t.push({key:e.type,deviceSupport:e.supported_device,title:e.title,desc:e.description,link:e.launcher_link,image:e.image})}),t},_extendedDestroy:function(){this.header=null,this.games=[],this.downloadPage=null}})}(jQuery,Q,Pt.Settings,Pt.Config,Pt.Contracts,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Helpers.Notify,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(e){this.view="web.lottery",this.games=[],this.el=e||".lottery",this.actions=[[".btn-play-now","click","_playNowClickHandler"]]}_.Class("Pt.Controllers.BaseLotteryController",d),d.prototype=_.extend(u,{resolve:function(e){var t=this,n=c.Games.getGames("keno_lotto","gpi");n.then(function(n){t.games=n.games,e()})},init:function(){this.header={main:s.get("web.header",{leftButton:s.get("web.burgerIconButton"),centerButton:s.get("web.headerTitle",{title:_.trans("global.nav_lottery")}),rightButton:s.get("web.headerLangButton")}),sub:""},this.render(s.get(this.view,{games:this.games}))},renderComplete:function(){o.show(this)},_playNowClickHandler:function(){if(n.member.isLoggedIn){var t=e(this).attr("href");return _.isEmpty(t)||"#"==t||window.open(t,"keno-game-launcher","type=fullWindow"),this}e("#loginModal").modal()},_extendedDestroy:function(){this.games=[],this.header=null}})}(jQuery,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(e){this.view="web.sports",this.el=e||".sports",this.actions=[[this.el+" .btn-play-now","click","_playNowClickHandler"]]}_.Class("Pt.Controllers.BaseSportsController",p),p.prototype=_.extend(f,{resolve:function(e){e()},init:function(){this.header={main:a.get("web.header",{leftButton:a.get("web.burgerIconButton"),centerButton:a.get("web.headerTitle",{title:_.trans("global.nav_sportsbook")}),rightButton:a.get("web.headerLangButton")}),sub:""},this.render(a.get(this.view,{sports:r.sports,lang:l.get("lang")}))},renderComplete:function(){s.show(this)},_playNowClickHandler:function(t){t.preventDefault();var r=(e("body"),e(this)),s=r.attr("href"),a=r.data("action"),i=r.data("manner");return"authenticate"!==a||n.member.isLoggedIn?"launcher"!==i||_.isEmpty(s)||"#"==s?void(_.isEmpty(s)||"#"==s||o.navigate(s)):(window.open(s,"game-launcher","type=fullWindow"),
this):(e("#loginModal").modal("show"),this)},_extendedDestroy:function(){this.header=null}})}(jQuery,Q,Pt.Settings,Pt.Config,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Managers.Cookie,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p,m,h,g){"use strict";function v(e){this.view={main:"web.promo",cards:"web.promoCards"},this.timerInterval=null,this.categories=[],this.promotions=[],this.currentCategory=null,this.validator=null,this.el=e||".promo",this.actions=[[".btn-promo-info","click","_onInfoButtonClick"],["#promoModal","hidden.bs.modal","_onModalHideHandler"],[".promo-claim-button","click","_showPromotionClaimModal"],[".submit-promotion-claim","click","_submitPromotionClaim"]]}_.Class("Pt.Controllers.BasePromoController",v),v.prototype=_.extend(g,{resolve:function(e,r){this.currentCategory=r.params.category||n.defaultPromotionCategory;var o=this,s=[d.Promotions.getPromotionsCategory(),d.Promotions.getPromotions(this.currentCategory)];t.all(s).then(function(t){o.categories=t[0],o.promotions=t[1],e()})},init:function(){this.header={main:a.get("web.header",{leftButton:a.get("web.burgerIconButton"),centerButton:a.get("web.headerTitle",{title:_.trans("global.nav_promo")}),rightButton:a.get("web.headerLangButton")}),sub:""},this.render(a.get(this.view.main,{currentCategory:this.currentCategory,promos:a.get(this.view.cards,{promotions:this.promotions}),categories:this.categories}))},renderComplete:function(){s.show(this),_.delay(function(){u.init()},200)},_onInfoButtonClick:function(t){var n=t.data.context,r=e(this),o=e("#promoModal"),s=r.data("promo"),a=_.findWhere(n.promotions,{id:s});return _.isEmpty(a)?this:(e("#promo-label-hold").text(a.get("title")),void e("#promo-content-hold").html(a.get("body")).ready(function(){o.modal("show"),n._startTicker(a.getPromoDuration())}))},_startTicker:function(t){var n=e("#ticker-container"),r=n.find(".months").find(".display"),o=n.find(".days").find(".display"),s=n.find(".hours").find(".display"),a=n.find(".minutes").find(".display"),i=n.find(".seconds").find(".display");r.html(t.months()),o.html(t.days()),s.html(t.hours()),a.html(t.minutes()),i.html(t.seconds()),this.timerInterval=setInterval(function(){t.subtract("00:00:01"),r.html(t.months()),o.html(t.days()),s.html(t.hours()),a.html(t.minutes()),i.html(t.seconds())},1e3)},_onModalHideHandler:function(t){e("#promo-label-hold").text(""),e("#promo-content-hold").html(""),t.data.context._stopTimer()},_showPromotionClaimModal:function(t){var n=t.data.context,o=e(this).data("promo"),s=_.findWhere(n.promotions,{id:o});f.show(a.get("web.promoClaim",{promo:s})),n.validator=new m('form[name="promotion_claim"]',r.validation.promotionClaim),n.validator.bindInput(!0).init()},_submitPromotionClaim:function(e){var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(){var t=e('form[name="promotion_claim"]'),n=t.find('input[name="promoCode"]').val(),r=t.find('input[name="comment"]').val(),o=this;l.start(),h.claim(n,r).then(function(e){p.success(e),f.hide(),o._stopTimer()},function(e){p.error(e)})["finally"](function(){l.done()})},_stopTimer:function(){clearInterval(this.timerInterval)},_extendedDestroy:function(){this.categories=[],this.promotions=[],this.currentCategory=null}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Widgets.TabSlider,Pt.Services.Cms,Pt.Helpers.Modal,Pt.Helpers.Notify,Pt.Managers.Validation,Pt.Services.Members.PromotionClaim,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(e){this.view="web.tmj",this.page={},this.el=e||".tmj",this.actions=[[this.el+" a.btn-dl","click","_onDownloadButtonClick"]]}_.Class("Pt.Controllers.BaseTmjController",d),d.prototype=_.extend(u,{resolve:function(e){var t=this;c.Pages.getPage("mobileTmj").then(function(e){_.isEmpty(e)||(t.page=e)})["finally"](function(){e()})},init:function(){return this.header={main:s.get("web.header",{leftButton:s.get("web.burgerIconButton"),centerButton:s.get("web.headerTitle",{title:_.trans("global.nav_tmj")}),rightButton:s.get("web.headerLangButton")}),sub:""},_.isEmpty(this.page)?void this.render(s.get("web.staticPage",{page:s.get("web.error404")})):void this.render(s.get(this.view,{content:s.compile(_.unescape(this.page.description))}))},renderComplete:function(){o.show(this)},_onDownloadButtonClick:function(t){t.preventDefault();var n=e(this).attr("href");window.open(n,"tmj-download","type=fullWindow")},_extendedDestroy:function(){this.header=null}})}(jQuery,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(e){this.view="web.vip",this.page={},this.el=e||".vip",this.actions=[]}_.Class("Pt.Controllers.BaseVipController",d),d.prototype=_.extend(u,{resolve:function(e){var t=this;c.Pages.getPage("mobilevip").then(function(e){_.isEmpty(e)||(t.page=e)})["finally"](function(){e()})},init:function(){return this.header={main:s.get("web.header",{leftButton:s.get("web.burgerIconButton"),centerButton:s.get("web.headerTitle",{title:_.trans("global.nav_vip")}),rightButton:s.get("web.headerLangButton")}),sub:""},_.isEmpty(this.page)?void this.render(s.get("web.staticPage",{page:s.get("web.error404")})):void this.render(s.get(this.view,{content:this.page.description}))},renderComplete:function(){o.show(this)},_extendedDestroy:function(){this.page=null,this.header=null}})}(jQuery,Q,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Broadcaster,Pt.Helpers.Nprogress,Pt.Widgets.Filters,Pt.Services.Cms,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p,m,h,g){"use strict";function v(){this.el=".signup",this.view="web.signup",this.signUpForm="#signupForm",this.validator=null,this.actions=[[this.signUpForm,"submit","_onFormSubmit"]]}t.Class("Pt.Controllers.BaseSignUpController",v),v.prototype=t.extend(g,{init:function(){return r.member.isLoggedIn?(u.navigate("/"),!1):void this.render(p.get(this.view,{affiliateId:d.get("affiliateid")}))},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e,n){var o=t.isEmpty(d.get("referrerId"))?"":d.get("referrerId");e.push({name:"operatorId",value:r.operatorId}),e.push({name:"referBy",value:o}),s.start();var a=h.Member.create(e);a.then(function(e){m.trackGoal(m.goalMap.SIGN_UP_SUCCESS),d.set({name:"pt_token",value:e.token}),d.set({name:"s",value:e.sessionId}),location.href="/"}),a.fail(function(e){t.has(e,"ErrorMessage")&&m.trackEvent(m.eventMap.MEMBER_ACTIONS,m.actionMap.SIGN_UP_FAIL,e.ErrorMessage),l.activate(),s.done(),i.show(e)})},renderComplete:function(){c.show(this),l.activate(),this.validator=new f(this.signUpForm,o.validation.signup),this.validator.bindInput(!0).init()},_destroyEvents:function(){var n=this;return t.isEmpty(this.actions)||t.each(this.actions,function(t){e("body").off(t[1],t[0],n[t[2]])}),this}})}(jQuery,_,Q,Pt.Settings,Pt.Rules,Pt.Helpers.Nprogress,Pt.Helpers.Notify,Pt.Helpers.Error,Pt.Widgets.Captcha,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Cookie,Pt.Managers.Validation,Pt.Managers.Template,Pt.Managers.Analytics,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l){function c(){function e(){l.call(this)}return e.prototype=Object.create(l.prototype),e.prototype.constructor=e,t.extend(e.prototype,{init:function(){this.widgets=[a],this.homeTemplate=i.get(this.view,{banners:a.getTemplate(null,{banners:this.banners}),loggedIn:r.member.isLoggedIn,menu:this.menu.menu_item}),this.render(this.homeTemplate)}}),new e}t.Class("Pt.Controllers.HomeController",c)}(jQuery,_,Pt.Config,Pt.Settings,Pt.Managers.Router,Pt.Managers.Page,Pt.Widgets.Banners,Pt.Managers.Template,Pt.Controllers.BaseHomeController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.LoginController",t)}(Pt.Controllers.BaseLoginController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.DownloadsController",t)}(Pt.Controllers.BaseDownloadsController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.StaticPageController",t)}(Pt.Controllers.BaseStaticPageController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.SlotsController",t)}(Pt.Controllers.BaseSlotsController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.CasinoController",t)}(Pt.Controllers.BaseCasinoController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.LotteryController",t)}(Pt.Controllers.BaseLotteryController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.SportsController",t)}(Pt.Controllers.BaseSportsController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.PromoController",t)}(Pt.Controllers.BasePromoController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.TmjController",t)}(Pt.Controllers.BaseTmjController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.VipController",t)}(Pt.Controllers.BaseVipController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.SignUpController",t)}(Pt.Controllers.BaseSignUpController),function(e,t,n,r,o,s,a,i,l,c,u,d){"use strict";var f={},p=n.extend(d,{activate:function(e,r){if(this.deactivate(e))return this;if(i.setContext(e),l.start(),n.isEmpty(f)){var o=this,s=[u.Wallet.getAll()];t.all(s).then(function(t){o.wallets=f.walletList=t[0],o.nexter(r,e)})}else this.wallets=f.walletList,this.nexter(r,e)},nexter:function(e,t){var n=this;this.checkMaintenance(t).then(function(){u.Session.validate().then(function(){"function"==typeof n.resolve?n.resolve(e):e()})})},getHeader:function(e,t,n){return{main:a.get("web.header",{leftButton:null==n||"undefined"==typeof n?a.get("web.backIconButton",{link:"/funds"}):n,centerButton:a.get("web.navButton",{title:e}),rightButton:null==t||"undefined"==typeof t?a.get("web.headerLangButton"):t}),sub:o.funds.submenus}},checkMaintenance:function(e){var s=t.defer(),a=n.str_replace_key({":oId":r.operatorId},o.urls.api.maintenance);return c.get(a).then(function(t){var r=n.trimSlash(e.path).split("/");return r=r[1],n.contains(t.data,o.maintenance_keys[r])?(i.redirect("/maintenance/mobile-funds-maintenance"),!0):void s.resolve(!1)}).fail(function(){s.resolve(!1)}),s.promise}});n.Class("Pt.Controllers.AbstractFundsController",p)}(jQuery,Q,_,Pt.Settings,Pt.Config,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Router,Pt.Helpers.Nprogress,Pt.Managers.HttpClient,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l){"use strict";function c(){this.title="Funds",this.view={dashboard:"funds.dashboard"},this.el=".funds",this.actions=[[this.el+" .dashboard a","click","_onDashboardButtonClick"]],this.widgets=[]}_.Class("Pt.Controllers.BaseFundsController",c),c.prototype=_.extend(l,{init:function(){this.render(a.get(this.view.dashboard,{balances:i.getTemplate("",{wallets:this.wallets,currency:n.member.currency,containerId:"funds-wallet"}),submenus:r.funds.submenus}))},renderComplete:function(){o.show(this),i.activate(this.wallets)},_onDashboardButtonClick:function(t){t.preventDefault(),s.navigate(e(this).attr("href"))}})}(jQuery,Q,Pt.Settings,Pt.Config,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Widgets.Balances,_.clone(Pt.Controllers.AbstractFundsController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(){this.title=_.trans("funds.transfer_title"),this.view="funds.fundTransfer",this.el=".fund-transfer",this.form=this.el+' form[name="fundTransferForm"]',this.bonusCodeWidgetType="select",this.validator=null,this.actions=[[this.form,"submit","_transferFundHandler"],["#transferTo, #transferFrom","change","_walletChangedHandler"]],this.widgets=[]}_.Class("Pt.Controllers.BaseFundTransferController",p),p.prototype=_.extend(f,{init:function(){this.header=this.getHeader(this.title,""),c.subscribe(c.getChannel("funds.bonusCodeSelected"),this._bonusCodeSelectedHandler),this.render(s.get(this.view,{sourceWallets:this.wallets,destinationWallets:this.wallets,balances:d.getTemplate("",{wallets:this.wallets,currency:n.member.currency,containerId:"funds-wallet"})}))},renderComplete:function(){var e=null;e="radio"===this.bonusCodeWidgetType?Pt.Widgets.BonusCodeRadioWidget.activate("#radio-bonus-code-container"):Pt.Widgets.BonusCodeWidget.activate("#bonus-code-container"),o.show(this),d.activate(this.wallets),this.widgets.push(d,e),this.validator=new i(this.form,r.validation.fundTransfer),this.validator.bindInput(!0).init()},_transferFundHandler:function(e){var t=e.data.context;t.validator.validate(t._validationSuccessfulHandler,t),e.preventDefault()},_validationSuccessfulHandler:function(t){var n=this;a.start();var r=_.findWhere(t,{name:"bonusCode"});r&&(r.name="promoCode"),u.FundTransfer.transfer(t).then(function(){l.success(_.trans("funds.fund_transfer_success")),e(n.form)[0].reset(),c.publish(c.getChannel("funds.transferCompleted"),t),e("#bonusCode").val("").parent(".form-group").hide(),e("option[disabled]").prop("disabled",!1)},function(e){l.error(e)})["finally"](function(){a.done()})},_walletChangedHandler:function(){var t={},n="transferFrom"===this.name?"#transferTo":"#transferFrom";t[this.name]=+this.value,e(n).find("[disabled]").attr("disabled",!1).end().find('option[value="'+this.value+'"]').prop("disabled",!0),"transferFrom"===this.name&&0!==+this.value&&e("#bonusCodeInputContainer").find("input").val(""),c.publish(c.getChannel("funds.walletSelected"),t)},_bonusCodeSelectedHandler:function(t){var n=e("#bonusCodeInputContainer"),r=t.bonusCode,o=e("#transferTo");"other"===r?n.show().find("input").val(""):n.hide().find("input").val(r),t.walletId&&o.find("option[value="+t.walletId+"]").length>0&&o.val(t.walletId).trigger("change")}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Managers.Page,Pt.Managers.Template,Pt.Helpers.Nprogress,Pt.Managers.Validation,Pt.Helpers.Notify,Pt.Managers.Broadcaster,Pt.Services.Members,Pt.Widgets.Balances,_.clone(Pt.Controllers.AbstractFundsController)),function(e,t){function n(){function n(e){var t=s[e];if(t)return new Pt.Gateway.Deposit[t]}function r(r){try{var o={},s="",a=r.get("processType");return"basic"===a?(o=new Pt.Gateway.Deposit.BasicDeposit,s="basic"):"bank_transfer"===a?(o=new Pt.Gateway.Deposit.BankTransfer,s="bank_transfer"):"custom"===a&&(o=n(r.get("id")),s=r.get("methodCode")),e.extendDepositAmountRules(s,r.getMinimumAmount(),r.getMaximumAmount()),o.init(r,new t(o.form,e.getMethodRules(s))),o}catch(i){void 0}}function o(e){return a[e]||{}}var s={110101:"Offline",120254:"SdaPay",120244:"DaddyPayQr",120241:"YeePayCard"},a={110101:"offline",120254:"basic",120244:"daddypay_qr",120241:"yeepay_card"};return{make:n,getMethodName:o,makeByMethod:r}}_.Class("Pt.Gateway.Deposit.DepositFactory",n())}(Pt.Helpers.RulesHelper,Pt.Managers.Validation),function(e,t,n){function r(){function r(r){var o="";o=r.launcherUrl?r.launcherUrl:e.str_replace_key({":methodId":r.methodId},t.urls.api.depositLauncher[r.launcherType]),o+="?transferAmount="+r.amount,r.custom&&e.each(r.custom,function(t,n){e.isArray(t)?e.each(t,function(e){o+="&"+n+"[]="+e}):o+="&"+n+"="+t}),o+="&acceptLanguage="+n.get("lang"),o+="&errorUrl="+location.origin+"/deposit-error/"+r.methodId,o+="&token="+n.get("pt_token"),window.open(o,r.title||"Deposit","width="+(r.width||1e3)+", height="+(r.height||800))}return{launch:r}}e.Class("Pt.Gateway.Deposit.DepositLauncherService",r())}(_,Pt.Config,Pt.Managers.Cookie),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p){"use strict";function m(){this.title=_.trans("funds.deposit_title"),this.view={offline:"funds.deposit"},this.depositMethods=[],this.customDepositLink=null,this.el=".deposit",this.actions=[[".deposit-method-links .deposit-tabs","click","_redirect"],[".btn-upload-qr","click","_onUploadQrButtonClick"]],this.widgets=[]}_.Class("Pt.Controllers.BaseDepositController",m),m.prototype=_.extend(p,{resolve:function(e){var n=this,r=[u.Deposit.getMethods(),f.init(),u.Deposit.getCustomDepositLink()];t.all(r).then(function(e){n.depositMethods=e[0],n.customDepositLink=e[2]})["finally"](function(){e()})},init:function(e){var t=this,o=+e.params.methodId;this.depositMethods.length<=0&&(r.error(_.trans("errors.deposit_method_zero_active")),a.navigate("/funds")),l.init(),this.header=this.getHeader(this.title,""),o||(o=this.depositMethods[0].get("id")),this.depositMethod=_.findWhere(this.depositMethods,{id:o}),this.depositMethod||(r.error(_.trans("errors.deposit_method_inactive"),0),a.navigate("/funds")),this._clearContainer(),this.gateway=d.makeByMethod(this.depositMethod),this.gateway.resolve().then(function(e){e.depositMethod=t.depositMethod,e.depositSettingsTemplate=s.get("funds.depositMethodSettings",{depositMethod:t.depositMethod}),t.render(s.get("funds.deposit",{depositMethods:t.depositMethods,activeMethodId:o,balances:i.getTemplate("",{wallets:t.wallets,currency:n.member.currency,containerId:"funds-wallet"}),gatewayTemplate:s.get(t.gateway.view,e),depositSettingsTemplate:e.depositSettingsTemplate,depositInstructionTemplate:f.getByMethodName(t.depositMethod.get("methodCode")),customDepositLink:t.customDepositLink}))})},renderComplete:function(){o.show(this),i.activate(this.wallets),this.gateway.onRenderComplete(),_.delay(function(){c.init()},200)},_redirect:function(t){t.preventDefault(),a.navigate(e(this).attr("href"))},_onUploadQrButtonClick:function(e){e.preventDefault(),l.decode()},_clearContainer:function(){e("#gateway-container").html("")},_extendedDestroy:function(){this._clearContainer(),this.gateway&&"function"==typeof this.gateway.destroy&&this.gateway.destroy()}})}(jQuery,Q,Pt.Settings,Pt.Helpers.Notify,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Router,Pt.Widgets.Balances,Pt.Widgets.QrCode,Pt.Widgets.TabSlider,Pt.Services.Members,Pt.Gateway.Deposit.DepositFactory,Pt.Services.Cms.DepositInstructions,_.clone(Pt.Controllers.AbstractFundsController)),function(e,t,n,r,o){"use strict";function s(){this.view="funds.bankTransferDeposit",this.container="#bank-transfer-deposit",this.form=this.container+" form[name=bank_transfer_deposit]",this.actions=[[this.form,"submit","_onFormSubmit"]],this.settings={},this.validator=null}_.Class("Pt.Gateway.Deposit.BaseBankTransfer",s),s.prototype=_.extend(o,{init:function(e,t){this.settings.depositSettings=e,this.validator=t},resolve:function(){var e=t.defer();return n.getBankCodeByMethodCode(this.settings.depositSettings.get("methodCode")).then(function(t){e.resolve({banks:t})},function(t){e.reject(t)}),e.promise},_onFormSubmit:function(e){var t=e.data.context;e.preventDefault(),t.validator.validate(t._onValidationSuccess,t,!1)},_onValidationSuccess:function(t){var n=this.settings.depositSettings;r.launch({methodId:n.get("id"),amount:t.get("amount"),launcherUrl:n.get("launcherUrl"),custom:{bankCode:t.get("bankCode")},title:_.trans("funds.payment_"+n.get("id"))}),e(this.form)[0].reset()},onRenderComplete:function(){this.validator.bindInput(!0).shouldSerialize(!1).init(),this._bindEvents()}})}(jQuery,Q,Pt.Services.Cms.BankCode,Pt.Gateway.Deposit.DepositLauncherService,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r){function o(){this.view="funds.basicDeposit",this.container="#basic-deposit",this.form=this.container+" form[name=basic_deposit]",this.actions=[[this.form,"submit","_onFormSubmit"]],this.settings={},this.validator=null}_.Class("Pt.Gateway.Deposit.BaseBasicDeposit",o),o.prototype=_.extend(r,{resolve:function(){var e=t.defer();return e.resolve({}),e.promise},init:function(e,t){this.settings.depositSettings=e,this.validator=t},_onFormSubmit:function(e){var t=e.data.context;e.preventDefault(),t.validator.validate(t._onValidationSuccess,t,!1)},_onValidationSuccess:function(t){var r=this,o=r.settings.depositSettings;n.launch({methodId:o.get("id"),amount:t.get("amount"),launcherUrl:o.get("launcherUrl"),title:_.trans("funds.payment_"+o.get("id"))}),e(r.form)[0].reset()},onRenderComplete:function(){this.validator.bindInput(!0).shouldSerialize(!1).init(),this._bindEvents()}})}(jQuery,Q,Pt.Gateway.Deposit.DepositLauncherService,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c){function u(){this.view="funds.offlineDeposit",this.container="#offline-deposit",this.form=this.container+" form[name=offline_deposit]",this.actions=[["#bankCode","change","_showBankName"],[this.form,"submit","_onFormSubmit"],["#depositFile","change","_showFileName"],[".customer-service-button","click","_openLiveChat"],["input[name=bankAccountId]","change","_bankAccountChangeHandler"]],this.settings={},this.validator=null}_.Class("Pt.Gateway.Deposit.BaseOffline",u),u.prototype=_.extend(c,{resolve:function(){var e=this,n=t.defer(),r=[i.Bank.getBanks(),i.Bank.getSystemBankAccounts(),i.Bank.getBankingOptions(),i.Deposit.getConfig(),i.Deposit.getPreferredBank()];return t.all(r).then(function(t){var r=t[0],o=t[4],s=!1;!_.findWhere(r,{bankCode:o.bankCode})&&o.hasBeenSet()&&(s=!0),e.settings={banks:r,systemBankAccounts:t[1],bankingOptions:t[2],offlineDepositConfig:t[3],preferredBank:o,showWarningMessage:s},n.resolve(e.settings)},function(e){n.reject(e)}),n.promise},init:function(e,t){this.validator=t},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t,!1)},_onValidationSuccess:function(t,r){var a=r,l=t.get("bankCode"),c=_.findWhere(a.settings.banks,{bankCode:l}),u=null,d=n(t.get("bankTransferDate")+" "+t.get("depositTime")).toISOString();try{u=e("#depositFile")[0].files[0]}catch(f){}t.set("bankName",c.bankName),t.set("bankTransferDate",d),t.set("requestAmount",t.get("amount")),"OTHER"===l&&t.get("bankNameNative")||t.set("bankNameNative",c.bankNameNative),u&&t.set("depositFile",u),s.start(),i.Deposit.createOfflineTransaction(t.toFormData()).then(function(t){o.success(_.str_replace_key({":transactionId":t.transactionId},_.trans("funds.deposit_success"))),e(a.form).find("[name=amount]").val("")}).fail(function(e){o.error(e)})["finally"](function(){s.done()})},_showBankName:function(t){var n=e("#bankNameContainer");"OTHER"===t.target.value?n.show():n.hide()},_showFileName:function(t){var n=t.target.value,r=e("#file-name-display"),o=e("#attach-file-display");t.target.value?(o.hide(),r.show().html(n)):(o.show(),r.hide())},_openLiveChat:function(e){window.open(r.liveChat_url),e.preventDefault()},_bankAccountChangeHandler:function(t){var n=t.data.context.settings.systemBankAccounts,r=_.find(n,{accountId:+e(this).val()}),o=e(".qr-code-container"),s=e(".bank-information-container");r&&r.shouldShowBankInfo()?s.show().find(".channel").html(r.get("bankNameNative")).end().find(".bank-account-name").html(r.get("accountName")).end().find(".bank-account-number").html(r.get("accountNumber")):s.hide(),r&&r.image?(o.find("img").attr("src","data:image/png;base64, "+r.image),a.decodeImage(o.find("img")).then(function(e){o.find("a").attr("href",e.value).attr("target","_blank")}).fail(function(){o.find("a").removeAttr("href").removeAttr("target")})["finally"](function(){o.show()})):o.hide().find("image").attr("src","").end().find("a").removeAttr("href").removeAttr("target")},onRenderComplete:function(){var t=this,n=t.settings.offlineDepositConfig,r=t.settings.preferredBank;_.findWhere(n,{name:"bankCode"});_.each(n,function(t){var n=e("#"+t.name);""!==t.defaultValue&&n.val(t.defaultValue).change(),t.shouldDisplay||n.closest("fieldset").hide()}),_.each(r,function(n,r){var o=t.settings.preferredBank.get(r);o&&e("#"+r).val(o).change()}),this.validator.bindInput(!0).shouldSerialize(!1).init(),this._bindEvents(),e("input[name=bankAccountId]").first().trigger("change")}})}(jQuery,Q,moment,Pt.Settings,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Helpers.QrCode,Pt.Services.Members,Pt.Managers.Template,_.clone(Pt.Controllers.AbstractController)),function(e,t){"use strict";function n(){function n(e){var n=a[e];return n?new Pt.Gateway.Withdrawal[n]:(t.navigate("/error/404"),!1)}function r(t){return e.isEmpty(t)?s:t}function o(){return a}var s="210602",a={210602:"Offline","210602-WECHAT":"OfflineWeChat"};return{make:n,getDefaultMethodIdOnNull:r,getSupportedMethods:o}}e.Class("Pt.Gateway.Withdrawal.WithdrawalFactory",n())}(_,Pt.Managers.Router),function(e,t,n,r,o,s,a,i,l,c){"use strict";function u(){this.methodId="210602",this.el=".withdrawal",this.form=this.el+" #withdrawal-form",this.validator=null,this.actions=[[this.form,"submit","_onFormSubmit"],[this.form+' select[name="bankCode"]',"change","_onBankCodeChange"]]}_.Class("Pt.Gateway.Withdrawal.BaseOffline",u),u.prototype=_.extend(c,{resolve:function(){var e=t.defer(),n=[l.Bank.getBanks()];return t.all(n).then(function(t){e.resolve({banks:t[0]})}).fail(function(){e.resolve({banks:[]})}),e.promise},init:function(t){this.settings=t;var n=_.findWhere(t.withdrawalSettings,{methodId:this.methodId});r.extendWithdrawalAmountRules("offline",parseInt(n.minWithdrawal),parseInt(n.maxWithdrawal)),this.validator=new i(this.form,r.getMethodRules("offline","withdrawal")),this.validator.bindInput(!0).init(),this._bindEvents(),e(this.form+' select[name="bankCode"]').trigger("change")},getTemplate:function(e){return e.withdrawalSettingsView=a.get("funds.withdrawalSettings",{withdrawalSettings:e.withdrawalSettings}),a.get("funds.offlineWithdrawal",e)},_onBankCodeChange:function(t){var n=e("#bankNameNative");return"OTHER"===e(this).val()?(n.attr("type","text").closest("fieldset").css({display:"block"}),this):void n.attr("type","hidden").closest("fieldset").css({display:"none"})},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(t,n){var r=n,a=_.findWhere(t,{name:"bankCode"}),i=_.findWhere(r.settings.gatewaySettings.banks,{bankCode:a.value}),c=_.findWhere(t,{name:"bankNameNative"}),u=_.findWhere(t,{name:"amount"});t.push({name:"bankName",value:i.bankName}),t.push({name:"source",value:"Mobile"}),t.push({name:"memberMobile",value:"-"}),t.push({name:"requestAmount",value:u.value}),_.isEmpty(c.value)&&(c.value=i.bankNameNative),s.start(),l.Withdrawal.withdraw(t).then(function(t){o.success(_.str_replace_key({":transactionId":t.data.invId},_.trans("funds.withdrawal_success"))),e(r.form)[0].reset()},function(e){o.error(e)})["finally"](function(){s.done()})}})}(jQuery,Q,Pt.Settings,Pt.Helpers.RulesHelper,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d){"use strict";function f(){this.title=_.trans("funds.withdrawal_title"),this.view="funds.withdrawal",this.el=".withdrawal",this.actions=[[".withdrawal-method-links a","click","_redirect"]],this.gateway=null,this.widgets=[]}_.Class("Pt.Controllers.BaseWithdrawalController",f),f.prototype=_.extend(d,{resolve:function(e){var n=this,r=[i.Withdrawal.getMethods()];t.all(r).then(function(t){n.withdrawalMethods=t[0],e()})},init:function(e){this.header=this.getHeader(this.title,"");var t=this,r=_.findWhere(this.withdrawalMethods,{methodId:c.getDefaultMethodIdOnNull(e.params.method)});this.gateway=c.make(c.getDefaultMethodIdOnNull(e.params.method)),"undefined"==typeof this.gateway&&(location.href="/funds"),this.gateway.resolve().then(function(o){t.gatewaySettings=o,t.render(s.get(t.view,{withdrawalMethods:t.withdrawalMethods,supportedMethods:c.getSupportedMethods(),activeMethodId:e.params.method,balances:l.getTemplate("",{wallets:t.wallets,currency:n.member.currency,containerId:"funds-wallet"}),withdrawalForm:t.gateway.getTemplate({withdrawalSettings:r,gatewaySettings:o})}))}).fail(function(e){void 0})},renderComplete:function(){o.show(this),l.activate(this.wallets),this.gateway.init({withdrawalSettings:this.withdrawalMethods,gatewaySettings:this.gatewaySettings})},_redirect:function(t){t.preventDefault(),u.navigate(e(this).attr("href"))},_extendedDestroy:function(){e("#withdrawal-method-container").html("")}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Managers.Page,Pt.Managers.Template,Pt.Gateway.Withdrawal,Pt.Services.Members,Pt.Widgets.Balances,Pt.Gateway.Withdrawal.WithdrawalFactory,Pt.Managers.Router,_.clone(Pt.Controllers.AbstractFundsController)),function(e){"use strict";function t(){function e(e){var t=n[e];if(t)return new Pt.History[t]}function t(){return n}var n={"deposit-withdrawal":"DepositWithdrawal","fund-transfer":"FundTransfer",adjustments:"Adjustments","referral-bonus":"ReferralBonus"};return{make:e,getSupportedModules:t}}e.Class("Pt.History.Factory",t())}(_),function(e,t,n,r,o,s,a,i,l){"use strict";function c(){this.title=_.trans("funds.history_title"),this.view="funds.history",this.gateway=null,this.el=".history",this.actions=[[this.el+" .nav-link","click","_onHistoryTabClick"]]}_.Class("Pt.Controllers.BaseHistoryController",c),c.prototype=_.extend(l,{init:function(e){var t=this;this.header=this.getHeader(this.title,""),this._extendedDestroy(),this.gateway=i.make(e.params.type),this.gateway.resolve({wallets:this.wallets}).then(function(r){t.render(s.get(t.view,{active:e.params.type,modules:i.getSupportedModules(),balances:a.getTemplate("",{wallets:t.wallets,currency:n.member.currency,containerId:"funds-wallet"}),historyForm:t.gateway.getTemplate(r)}))})},renderComplete:function(){r.show(this),a.activate(this.wallets),this.gateway.init(),_.delay(function(){e(".nav-link.active").focus()},200)},_onHistoryTabClick:function(t){t.preventDefault();var n=e(this).attr("href");o.navigate(n)},_extendedDestroy:function(){this.gateway&&"function"==typeof this.gateway._extendedDestroy&&this.gateway._extendedDestroy()}})}(jQuery,Q,Pt.Settings,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Widgets.Balances,Pt.History.Factory,_.clone(Pt.Controllers.AbstractFundsController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(){this.el="#deposit-withdrawal",this.form="#deposit-withdrawal-form",this.view="funds.depositWithdrawalHistory",this.card="funds.depositWithdrawalHistoryCard",this.noRecords="funds.historyNoRecords",this.historyView=".history-data .row",this.processing=!1,this.historicalData=[],this.perPage=5,this.actions=[[this.form,"submit","_onFormSubmit"],[".btn-load-more","click","_onLoadMore"]]}_.Class("Pt.History.BaseDepositWithdrawal",d),d.prototype=_.extend(u,{resolve:function(e){var n=t.defer();return n.resolve(e),n.promise},init:function(){this.validator=new l(this.form,o.validation.history),this.validator.bindInput(!0).init(),this._bindEvents()},getTemplate:function(){
return i.get(this.view)},_display:function(t,n){n=n||0;var r=t.length>0?this.card:0===n?this.noRecords:"",o=i.get(r,{histories:t,statusCodes:this.statusCodes});n?e(this.historyView).append(o):(e(this.historyView).html(o),e("body").animate({scrollTop:e(".history-data").position().top}));var s=e(".btn-load-more");s.css({display:"none"}),this.historicalData.length>this.perPage&&t.length>0&&s.css({display:"block"})},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e,t){if(t.processing)return this;t.processing=!0;var n={};_.each(e,function(e){n[e.name]=e.value}),a.start(),c.History.getDepositWithdrawal(n).then(function(e){t.historicalData=e,t._display(_.first(e,t.perPage))}).fail(function(e){s.error(e)})["finally"](function(){t.processing=!1,a.done()})},_onLoadMore:function(t){t.preventDefault();var n=t.data.context,r=e(".history-cards").length,o=_.getRange(n.historicalData,r,n.perPage);n._display(o,1)},_extendedDestroy:function(){this.validator=null,this.historicalData=[],this.processing=!1}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(){this.el="#fund-transfer",this.form="#fund-transfer-form",this.view="funds.fundTransferHistory",this.card="funds.fundTransferHistoryCard",this.noRecords="funds.historyNoRecords",this.historyView=".history-data .row",this.processing=!1,this.historicalData=[],this.perPage=5,this.actions=[[this.form,"submit","_onFormSubmit"],[".btn-load-more","click","_onLoadMore"]]}_.Class("Pt.History.BaseFundTransfer",d),d.prototype=_.extend(u,{resolve:function(e){var n=t.defer();return this.wallets=e.wallets,n.resolve(e),n.promise},init:function(){this.validator=new l(this.form,o.validation.history),this.validator.bindInput(!0).init(),this._bindEvents()},getTemplate:function(e){return i.get(this.view,e)},_display:function(t,n){n=n||0;var r=t.length>0?this.card:0===n?this.noRecords:"",o=i.get(r,{histories:t,wallets:this.wallets,statusCodes:this.statusCodes});n?e(this.historyView).append(o):(e(this.historyView).html(o),e("body").animate({scrollTop:e(".history-data").position().top}));var s=e(".btn-load-more");s.css({display:"none"}),this.historicalData.length>this.perPage&&t.length>0&&s.css({display:"block"})},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e,t){if(t.processing)return this;t.processing=!0;var n={};_.each(e,function(e){n[e.name]=e.value}),a.start(),c.History.getFundTransfer(n).then(function(e){t.historicalData=e,t._display(_.first(e,t.perPage))}).fail(function(e){s.error(e)})["finally"](function(){t.processing=!1,a.done()})},_onLoadMore:function(t){t.preventDefault();var n=t.data.context,r=e(".history-cards").length,o=_.getRange(n.historicalData,r,n.perPage);n._display(o,1)},_extendedDestroy:function(){this.historicalData=[],this.processing=!1,this.validator=null}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(){this.el="#adjustments",this.form="#adjustments-form",this.view="funds.adjustmentsHistory",this.card="funds.adjustmentsHistoryCard",this.noRecords="funds.historyNoRecords",this.historyView=".history-data .row",this.processing=!1,this.historicalData=[],this.perPage=5,this.actions=[[this.form,"submit","_onFormSubmit"],[".btn-load-more","click","_onLoadMore"]]}_.Class("Pt.History.BaseAdjustments",d),d.prototype=_.extend(u,{resolve:function(e){var n=t.defer();return n.resolve(e),n.promise},init:function(){this.validator=new l(this.form,o.validation.history),this.validator.bindInput(!0).init(),this._bindEvents()},getTemplate:function(){return i.get(this.view)},_display:function(t,n){n=n||0;var r=t.length>0?this.card:0===n?this.noRecords:"",o=i.get(r,{histories:t,statusCodes:this.statusCodes});n?e(this.historyView).append(o):(e(this.historyView).html(o),e("body").animate({scrollTop:e(".history-data").position().top}));var s=e(".btn-load-more");s.css({display:"none"}),this.historicalData.length>this.perPage&&t.length>0&&s.css({display:"block"})},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e,t){if(t.processing)return this;t.processing=!0;var n={};_.each(e,function(e){n[e.name]=e.value}),a.start(),c.History.getAdjustments(n).then(function(e){t.historicalData=e,t._display(_.first(e,t.perPage))}).fail(function(e){s.error(e)})["finally"](function(){t.processing=!1,a.done()})},_onLoadMore:function(t){t.preventDefault();var n=t.data.context,r=e(".history-cards").length,o=_.getRange(n.historicalData,r,n.perPage);n._display(o,1)},_extendedDestroy:function(){this.historicalData=[],this.processing=!1,this.validator=null}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d){"use strict";function f(){this.el="#referralBonus",this.form="#referralBonus-form",this.view="funds.referralBonusHistory",this.card="funds.referralBonusHistoryCard",this.noRecords="funds.historyNoRecords",this.historyView=".history-data .row",this.processing=!1,this.historicalData=[],this.perPage=5,this.actions=[[this.form,"submit","_onFormSubmit"],[".btn-load-more","click","_onLoadMore"]]}_.Class("Pt.History.BaseReferralBonus",f),f.prototype=_.extend(d,{resolve:function(){var e=t.defer();return c.History.getReferralBonus({from:n().format("YYYY-MM-DD"),to:n().format("YYYY-MM-DD")}).then(function(t){var n=_.isEmpty(t)?new u.ReferralBonusHistory:t[0];e.resolve({reports:n})}).fail(function(){e.resolve({reports:new u.ReferralBonusHistory})}),e.promise},init:function(){this.validator=new l(this.form,o.validation.history),this.validator.bindInput(!0).init(),this._bindEvents()},getTemplate:function(e){return i.get(this.view,e)},_display:function(t,n){n=n||0;var r=t.length>0?this.card:0===n?this.noRecords:"",o=i.get(r,{histories:t,statusCodes:this.statusCodes});n?e(this.historyView).append(o):(e(this.historyView).html(o),e("body").animate({scrollTop:e(".history-data").position().top}));var s=e(".btn-load-more");s.css({display:"none"}),this.historicalData.length>this.perPage&&t.length>0&&s.css({display:"block"})},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e,t){if(t.processing)return this;t.processing=!0;var n={};_.each(e,function(e){n[e.name]=e.value}),a.start(),c.History.getReferralBonus(n).then(function(e){t.historicalData=e,t._display(_.first(e,t.perPage))}).fail(function(e){s.error(e)})["finally"](function(){t.processing=!1,a.done()})},_onLoadMore:function(t){t.preventDefault();var n=t.data.context,r=e(".history-cards").length,o=_.getRange(n.historicalData,r,n.perPage);n._display(o,1)},_extendedDestroy:function(){this.historicalData=[],this.processing=!1,this.validator=null}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,Pt.Contracts,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u){"use strict";function d(){this.title=_.trans("funds.freebet_title"),this.view="funds.freebet",this.container=".free-bet",this.formSelector=this.container+' form[name="freeBetClaim"]',this.validator=null,this.actions=[[this.formSelector,"submit","_formSubmissionHandler"]]}_.Class("Pt.Controllers.BaseFreebetController",d),d.prototype=_.extend(u,{init:function(){var e=_.filter(this.wallets,function(e){return 0!==e.id}),r={wallets:e,balances:l.getTemplate("",{wallets:this.wallets,currency:t.member.currency,containerId:"funds-wallet"})};this.header=this.getHeader(this.title,""),this.render(o.get(this.view,r)),this.validator=new s(this.formSelector,n.validation.freeBetClaim),this.validator.bindInput(!0).init()},renderComplete:function(){r.show(this),l.activate(this.wallets)},_formSubmissionHandler:function(e){var t=e.data.context;t.validator.validate(t._validationSuccessfulHandler,t),e.preventDefault()},_validationSuccessfulHandler:function(t){var n=this;a.start(),c.claim(t).then(function(){e(n.formSelector)[0].reset(),i.success(_.trans("funds.freebet_success"))},function(e){i.error(e)})["finally"](function(){a.done()})}})}(jQuery,Pt.Settings,Pt.Rules,Pt.Managers.Page,Pt.Managers.Template,Pt.Managers.Validation,Pt.Helpers.Nprogress,Pt.Helpers.Notify,Pt.Widgets.Balances,Pt.Services.Members.FreeBetClaim,_.clone(Pt.Controllers.AbstractFundsController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(){this.view="funds.rebate",this.validator=null,this.actions=[["#period","change","_updateSummaryList"],[".claim-button","click","_showRebateDetailModal"],[".claim-now-button","click","_claimInstantRebate"],[".sportsbook-claim-button","click","_displayAvailablePromos"],["#promotion-claim-button","click","_submitPromotionClaim"],[".product-accordion","click","_showRebateSummary"]],this.widgets=[],this.settings={}}_.Class("Pt.Controllers.BaseRebateController",p),p.prototype=_.extend(f,{resolve:function(e){var n=t.defer(),r=this;return u.getMondaySelection().then(function(t){u.getRebateProductsStructure().then(function(o){r.settings={mondays:t,summaryTable:o},n.resolve(r.settings),e()}).fail(function(e){n.reject(e)})}).fail(function(e){n.reject(e)}),n.promise},init:function(){this.header=this.getHeader(_.trans("funds.rebates_title"),""),this.render(s.get(this.view,this.settings))},renderComplete:function(){o.show(this)},_updateSummaryList:function(t){var n=t.data.context,r=+e(this).find(":selected").data("index");n._updateWeekRangeIndicator(n.settings.mondays[r])},_updateWeekRangeIndicator:function(t){e("#start-week").html(t.isoWeekday(1).format("YYYY-MM-DD")),e("#end-week").html(t.isoWeekday(7).format("YYYY-MM-DD")),e(".product-detail-container").html(""),e(".product-accordion").data("has-content",0),e(".product-detail-container.in").collapse("hide")},_showRebateDetailModal:function(){var t=e(this).data("claim-code").replace("_"," "),n=e("#period").val();a.start(),u.getRebateDetail(t,n).then(function(e){var t=s.get("funds.rebateDetailModal",{rebateDetail:e});c.show(t)})["finally"](function(){a.done()})},_showRebateSummary:function(t){t.preventDefault();var n=e(this),r=n.data("product-code"),o=r.replace("_"," "),i=e("#period").val(),l=e("#product-"+r);+n.data("has-content")||(a.start(),u.getRebateDetail(o,i).then(function(e){var t=s.get("funds.rebateSummary",{product:e});l.html(t),n.data("has-content",1)})["finally"](function(){a.done()}))},_displayAvailablePromos:function(){var t=e(this).data("product-code");a.start(),u.getPromotionCodesByProduct(t).then(function(t){var n=s.get("funds.sportsbookDetailModal",{promotionCodes:t});c.show(n),0!==e("#sportsbook-detail-container").find(".claimed-promo").length&&e("#promotion-claim-button").attr("disabled","disabled")})["finally"](function(){a.done()})},_claimInstantRebate:function(){var t=e(this),n=e("#period").val(),r=t.data("claim-code"),o=t.data("claim-amount");a.start(),t.prop("disabled",!0),u.claimInstantRebate({claimCode:r,amount:o,date:n}).then(function(e){l.success(e)},function(e){l.error(e),t.prop("disabled",!1)})["finally"](function(){a.done()})},_submitPromotionClaim:function(n){var r=[],o=[];e("#sportsbook-detail-container").find('input[name="promos"]:checked').each(function(){r.push(this.value)}),r.length>0&&(a.start(),_.each(r,function(e){o.push(d.claim(e,e))}),t.all(o).then(function(e){c.hide(),l.success(e)},function(e){l.error(e)})["finally"](function(){a.done()})),n.preventDefault()}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Managers.Page,Pt.Managers.Template,Pt.Helpers.Nprogress,Pt.Managers.Validation,Pt.Helpers.Notify,Pt.Helpers.Modal,Pt.Services.Members.Rebate,Pt.Services.Members.PromotionClaim,_.clone(Pt.Controllers.AbstractFundsController)),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.FundsController",t)}(Pt.Controllers.BaseFundsController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.FundTransferController",t)}(Pt.Controllers.BaseFundTransferController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.DepositController",t)}(Pt.Controllers.BaseDepositController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Gateway.Deposit.BankTransfer",t)}(Pt.Gateway.Deposit.BaseBankTransfer),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Gateway.Deposit.BasicDeposit",t)}(Pt.Gateway.Deposit.BaseBasicDeposit),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Gateway.Deposit.Offline",t)}(Pt.Gateway.Deposit.BaseOffline),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Gateway.Withdrawal.Offline",t)}(Pt.Gateway.Withdrawal.BaseOffline),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.WithdrawalController",t)}(Pt.Controllers.BaseWithdrawalController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.HistoryController",t)}(Pt.Controllers.BaseHistoryController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.History.DepositWithdrawal",t)}(Pt.History.BaseDepositWithdrawal),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.History.FundTransfer",t)}(Pt.History.BaseFundTransfer),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.History.Adjustments",t)}(Pt.History.BaseAdjustments),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.History.ReferralBonus",t)}(Pt.History.BaseReferralBonus),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.FreebetController",t)}(Pt.Controllers.BaseFreebetController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.RebateController",t)}(Pt.Controllers.BaseRebateController),function(e,t,n,r,o,s){"use strict";var a=n.extend(s,{getHeader:function(e,t,n){return{main:o.get("web.header",{leftButton:null==n||"undefined"==typeof n?o.get("web.backIconButton",{link:"/profile"}):n,centerButton:o.get("web.navButton",{title:e}),rightButton:null==t||"undefined"==typeof t?o.get("web.headerLangButton"):t}),sub:r.profile.submenus}}});n.Class("Pt.Controllers.AbstractProfileController",a)}(jQuery,Q,_,Pt.Config,Pt.Managers.Template,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i){"use strict";function l(){this.title="Profile",this.view={dashboard:"profile.dashboard",profileHeader:"profile.profileHeader"},this.el=".profile",this.actions=[[this.el+" .dashboard a","click","_onDashboardButtonClick"]],this.widgets=[]}_.Class("Pt.Controllers.BaseProfileController",l),l.prototype=_.extend(i,{init:function(){this.render(a.get(this.view.dashboard,{profileHeader:a.get(this.view.profileHeader,{member:r.member}),subMenus:n.profile.submenus}))},renderComplete:function(){o.show(this)},_onDashboardButtonClick:function(t){t.preventDefault(),s.navigate(e(this).attr("href"))}})}(jQuery,Q,Pt.Config,Pt.Settings,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(){this.title=_.trans("profile.bank_details_title"),this.view={main:"profile.bankDetail",profileHeader:"profile.profileHeader"},this.bankingDetail=null,this.banks=[],this.el=".banking-details",this.form=this.el+" #banking-details-form",this.validator=null,this.actions=[[this.form,"submit","_onFormSubmit"],[this.form+' select[name="bankCode"]',"change","_onBankCodeChange"]],this.widgets=[],this.showWarningMessage=!1}_.Class("Pt.Controllers.BaseBankDetailsController",p),p.prototype=_.extend(f,{resolve:function(e){var n=this,r=[u.Bank.getBanks(),u.Bank.getBankDetail()];t.all(r).then(function(e){n.banks=e[0],n.bankingDetail=e[1],n.bankingDetail.hasBeenSet()&&!n.bankingDetail.isBankSupported()&&(n.showWarningMessage=!0,n.bankingDetail=new d.BankDetail)}).fail(function(){o.error(_.trans("errors.unknown_error_notification"))})["finally"](function(){e()})},init:function(){this.header=this.getHeader(this.title),this.render(l.get(this.view.main,{currency:n.member.currency,bankingDetail:this.bankingDetail,banks:this.banks,profileHeader:l.get(this.view.profileHeader,{member:n.member}),showWarningMessage:this.showWarningMessage}))},renderComplete:function(){a.show(this),"KRW"===n.member.currency&&(r.validation.bankDetail.bankAddress={},r.validation.bankDetail.bankBranch={}),this.validator=new c(this.form,r.validation.bankDetail),this.validator.bindInput(!0).init(),this._bindEvents(),this.bankingDetail.isBankSupported()&&e(this.form+' select[name="bankCode"]').trigger("change")},_onBankCodeChange:function(t){var n=e("#bankNameNative"),o=t.data.context,s=o.bankingDetail,a=e(this).val();return"OTHER"===a&&a!==s.get("bankCode")?(r.validation.bankDetail.bankNameNative={presence:{message:"^Bank name is required."}},e(o.form).find(":input").not("[name=bankCode]").val(""),n.attr("type","text").closest("fieldset").show(),this):(a!==s.get("bankCode")?e(o.form).find(":input").not("[name=bankCode]").val(""):e(o.form)[0].reset(),r.validation.bankDetail.bankNameNative={},void n.attr("type","hidden").val(e(this).find("option:selected").data("banknamenative")).closest("fieldset").hide())},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(t){t.push({name:"bankName",value:e("#bankCode option:selected").text().trim()});var n=_.findWhere(t,{name:"preferred"});n&&(n.value=e("#preferred").is(":checked")?1:0),s.start(),u.Bank.updateBankDetail(t).then(function(){o.success(_.trans("profile.edit_bank_detail_success_message"))}).fail(function(e){o.error(e)})["finally"](function(){s.done()})},_extendedDestroy:function(){this.banks=[],this.bankingDetail=null}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,Pt.Contracts,_.clone(Pt.Controllers.AbstractProfileController)),function(e,t,n,r,o,s,a,i,l,c,u,d){"use strict";function f(){this.title=_.trans("profile.delivery_address_title"),this.view={main:"profile.deliveryAddress",profileHeader:"profile.profileHeader"},this.el=".delivery-address",this.form=this.el+" #delivery-address-form",this.actions=[[this.form,"submit","_onFormSubmit"]],this.widgets=[]}_.Class("Pt.Controllers.BaseDeliveryAddressController",f),f.prototype=_.extend(d,{resolve:function(e){var t,n=this;u.Member.getMember().then(function(e){t=e}).fail(function(){t=new Contracts.Member})["finally"](function(){n.member=t,e()})},init:function(){this.header=this.getHeader(this.title),this.render(l.get(this.view.main,{member:this.member,profileHeader:l.get(this.view.profileHeader,{member:n.member})}))},renderComplete:function(){a.show(this),this.validator=new c(this.form,r.validation.deliveryAddress),this.validator.bindInput(!0).init(),this._bindEvents()},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e){s.start(),u.Member.updateDeliveryAddress(e).then(function(){o.success(_.trans("profile.edit_profile_address_success_message"))},function(e){o.error(e)})["finally"](function(){s.done()})},_extendedDestroy:function(){this.member=null}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractProfileController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(){this.title=_.trans("profile.profile_title"),this.view={main:"profile.member",profileHeader:"profile.profileHeader"},this.validator=null,this.el=".edit-profile",this.form=this.el+" #edit-profile-form",this.actions=[[this.form,"submit","_onFormSubmit"]],this.widgets=[]}_.Class("Pt.Controllers.BaseMemberController",p),p.prototype=_.extend(f,{resolve:function(e){var t,n=this;u.Member.getMember().then(function(e){t=e}).fail(function(){t=new d.Member})["finally"](function(){n.member=t,e()})},init:function(){this.header=this.getHeader(this.title),this.render(l.get(this.view.main,{member:this.member,profileHeader:l.get(this.view.profileHeader,{member:n.member})}))},renderComplete:function(){a.show(this),this.validator=new c(this.form,r.validation.member),this.validator.bindInput(!0).init(),this._bindEvents()},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(e){s.start(),u.Member.update(e).then(function(){o.success(_.trans("profile.edit_profile_success_message"))},function(e){o.error(e)})["finally"](function(){s.done()})},_extendedDestroy:function(){this.member=null}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,Pt.Contracts,_.clone(Pt.Controllers.AbstractProfileController)),function(e,t,n,r,o,s,a,i,l,c,u,d){"use strict";function f(){this.title=_.trans("profile.change_password_title"),this.view={main:"profile.password",profileHeader:"profile.profileHeader"},this.el=".change-password",this.form=this.el+" #change-password-form",this.actions=[[this.form,"submit","_onFormSubmit"]],this.widgets=[]}_.Class("Pt.Controllers.BasePasswordController",f),f.prototype=_.extend(d,{init:function(){this.header=this.getHeader(this.title),this.render(l.get(this.view.main,{profileHeader:l.get(this.view.profileHeader,{member:n.member})}))},renderComplete:function(){a.show(this),this.validator=new c(this.form,r.validation.updatePassword),this.validator.bindInput(!0).init(),this._bindEvents()},_onFormSubmit:function(e){e.preventDefault();var t=e.data.context;t.validator.validate(t._onValidationSuccess,t)},_onValidationSuccess:function(t){var n=this;s.start(),u.Member.updatePassword(t).then(function(){o.success(_.trans("profile.change_password_success_message")),e(n.form)[0].reset()},function(e){o.error(e)})["finally"](function(){s.done()})}})}(jQuery,Q,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.Managers.Validation,Pt.Services.Members,_.clone(Pt.Controllers.AbstractProfileController)),function(){"use strict";function e(){function e(e){var n=t[e];if(n)return new Pt.PrivateMessage[n]}var t={messages:"Messages",compose:"Compose",message:"Reply"};return{make:e}}_.Class("Pt.PrivateMessage.Factory",e())}(),function(e,t,n,r,o,s,a,i){"use strict";function l(){this.title=_.trans("profile.pm_title"),this.view={main:"profile.pm",profileHeader:"profile.profileHeader"},this.pmInstance=null,this.actions=[],this.widgets=[]}_.Class("Pt.Controllers.BasePrivateMessageController",l),l.prototype=_.extend(i,{init:function(e){var t=this,r=e.params.module||"messages";this.pmInstance=a.make(r),this.pmInstance.resolve({requestContext:e}).then(function(e){t.header=t.pmInstance.header,t.render(s.get(t.view.main,{profileHeader:s.get(t.view.profileHeader,{member:n.member}),messageModule:t.pmInstance.getTemplate(e)}))})},renderComplete:function(){r.show(this),this.pmInstance.init()},_extendedDestroy:function(){"function"==typeof this.pmInstance.destroy&&this.pmInstance.destroy(),this.pmInstance=null}})}(jQuery,Q,Pt.Settings,Pt.Managers.Page,Pt.Managers.Router,Pt.Managers.Template,Pt.PrivateMessage.Factory,_.clone(Pt.Controllers.AbstractController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f){"use strict";function p(){this.view="profile.messages",this.form="#messages-form",this.actions=[[this.form+".view .list-group-item","click","_onMessageClick"],[this.form,"submit","_onFormSubmit"],["button.fab","click","_onFabClick"],["#header .basic-action-button","click","_onBasicActionButtonClick"]],this.subscription=[]}_.Class("Pt.PrivateMessage.BaseMessages",p),p.prototype=_.extend(f,{resolve:function(){this.header=this.getHeader(_.trans("profile.pm_title"),i.get("web.basicActionButton",{icon:"icon-edit",text:""}),null);var e=t.defer();return d.PrivateMessage.getPrivateMessages().then(function(t){e.resolve({messages:t})}),e.promise},init:function(){this._bindEvents()},getTemplate:function(e){return i.get(this.view,e)},_onMessageClick:function(t){u.navigate(e(this).data("href"))},_onFormSubmit:function(t){t.preventDefault();var n=t.data.context,r=e(n.form).serializeArray();if(_.isEmpty(r))return this;var o=confirm(_.trans("profile.delete_message_confirmation_message"));1==o&&(a.start(),_.each(r,function(t,n){d.PrivateMessage.deleteMessage(t.value).then(function(){r.length===n+1&&s.success(_.trans("profile.delete_message_success_message")),e("#mid-"+t.value).remove()})["finally"](function(){r.length===n+1&&a.done()})}))},_onFabClick:function(t){var n=t.data.context,r={compose:function(){u.navigate("/profile/private-messages/compose")},remove:function(){e(n.form).submit()}},o=e(this).attr("data-action");"function"==typeof r[o]&&r[o]()},_onBasicActionButtonClick:function(t){var n=e(this),r=t.data.context,o="pm-edit-cancel";return n.toggleClass("edit"),n.hasClass("edit")&&(o="pm-edit"),r._headerActionHandler({type:o})},_headerActionHandler:function(t){var n=this,r=e(".fab"),o=e(".fab span"),s=e(".custom-control-input"),a={"pm-edit":function(){s.attr("type","checkbox"),e(n.form).removeClass("view").addClass("edit"),r.attr("data-action","remove"),r.removeClass("btn-primary").addClass("btn-danger"),o.removeClass("icon-pen-solid").addClass("icon-trash")},"pm-edit-cancel":function(){s.attr("type","hidden"),e(n.form).removeClass("edit").addClass("view"),r.attr("data-action","compose"),r.removeClass("btn-danger").addClass("btn-primary"),o.removeClass("icon-trash").addClass("icon-pen-solid")}};"function"==typeof a[t.type]&&a[t.type]()}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Managers.Broadcaster,Pt.Managers.Router,Pt.Services.Members,_.clone(Pt.Controllers.AbstractProfileController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p){"use strict";function m(){this.view={main:"profile.message",replies:"profile.replies"},this.el=".message-reply",this.form="#message-reply-form",this.actions=[[this.form,"submit","_onFormSubmit"],[this.form+' textarea[name="text"]',"keydown","_keyDownHandler"]]}_.Class("Pt.PrivateMessage.BaseReply",m),m.prototype=_.extend(p,{resolve:function(e){var n=t.defer(),o=e.requestContext.params.messageId;return this.header=this.getHeader(_.trans("profile.pm_title"),"",i.get("web.backIconButton",{link:"/profile/private-messages"})),this.messageId=o,d.PrivateMessage.getMessage(o).then(function(e){n.resolve({message:e,memberCode:r.member.code,replies:e.replies})}),n.promise},init:function(){d.PrivateMessage.getUnread(!0),this._bindEvents()},getTemplate:function(e){return i.get(this.view.main,{message:e.message,memberCode:e.memberCode,replies:i.get(this.view.replies,{memberCode:e.memberCode,replies:e.replies})})},_keyDownHandler:function(e){var t=this;return 8!==e.keyCode&&t.scrollHeight>106?this:void setTimeout(function(){return t.style.cssText="height:auto; padding:0",t.scrollHeight>106?(t.style.cssText="height:106px",this):void(t.style.cssText="height:"+t.scrollHeight+"px")},0)},_onFormSubmit:function(t){t.preventDefault();var n=t.data.context,o=e('textarea[name="text"]');if(_.isEmpty(o.val()))return s.error(_.trans("profile.create_message_error_message")),this;var l=e(n.form).serializeArray();a.start(),d.PrivateMessage.sendMessage(n.messageId,l).then(function(){var t=_.extend(new f.PrivateMessage,{Sender:r.member.code,SenderDate:moment().format("YYYY-MM-DD hh:mm:ss"),messageText:_.findWhere(l,{name:"text"}).value}),s=i.get(n.view.replies,{memberCode:r.member.code,replies:[t]}),a=e.Event("keydown",{keyCode:8});o.val("").trigger(a),e(n.el+" .list-group").append(s)},function(e){s.error(e)})["finally"](function(){a.done()})}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Managers.Broadcaster,Pt.Managers.Router,Pt.Services.Members,Pt.Contracts,_.clone(Pt.Controllers.AbstractProfileController)),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p){"use strict";function m(){this.view="profile.compose",this.form="#new-message-form",this.actions=[[this.form,"submit","_onFormSubmit"]],this.subscription=[]}_.Class("Pt.PrivateMessage.BaseCompose",m),m.prototype=_.extend(p,{resolve:function(){var e=t.defer();return this.header=this.getHeader(_.trans("profile.pm_title"),""),d.PrivateMessage.getSubjects().then(function(t){e.resolve({subjects:t})}),e.promise},init:function(){this._bindEvents()},getTemplate:function(e){return i.get(this.view,e)},_onFormSubmit:function(t){t.preventDefault();var n=t.data.context,r=e('textarea[name="text"]');if(_.isEmpty(r.val()))return s.error(_.trans("profile.create_message_error_message")),this;var o=e(n.form).serializeArray();a.start(),d.PrivateMessage.sendMessage("",o).then(function(){s.success(_.trans("profile.create_new_message_success_message")),u.navigate("/profile/private-messages")},function(e){s.error(e)})["finally"](function(){a.done()})}})}(jQuery,Q,moment,Pt.Settings,Pt.Rules,Pt.Helpers.Notify,Pt.Helpers.Nprogress,Pt.Managers.Template,Pt.Managers.Validation,Pt.Managers.Broadcaster,Pt.Managers.Router,Pt.Services.Members,Pt.Contracts,_.clone(Pt.Controllers.AbstractProfileController)),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.ProfileController",t)}(Pt.Controllers.BaseProfileController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.BankDetailsController",t)}(Pt.Controllers.BaseBankDetailsController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.DeliveryAddressController",t)}(Pt.Controllers.BaseDeliveryAddressController),
function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.MemberController",t)}(Pt.Controllers.BaseMemberController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.PasswordController",t)}(Pt.Controllers.BasePasswordController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Controllers.PrivateMessageController",t)}(Pt.Controllers.BasePrivateMessageController),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.PrivateMessage.Messages",t)}(Pt.PrivateMessage.BaseMessages),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.PrivateMessage.Reply",t)}(Pt.PrivateMessage.BaseReply),function(e){function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.PrivateMessage.Compose",t)}(Pt.PrivateMessage.BaseCompose),function(e,t,n,r,o){"use strict";function s(){this.themingOngoing=!1,this.windowDefaultSize="width=1050, height=785",this.behaviorMap={tab:null,pop:"_blank",self:"_self"},this.actions=[["[data-hook^=launch-if-auth]","click","onLaunchIfAuthClick"],["[data-hook^=trigger-click]","click","onTriggerHookClick"],["[data-hook=theme-toggler]","click","onThemeHookClick"]]}s.prototype=_.extend(o,{init:function(){this._bindEvents()},onLaunchIfAuthClick:function(e){e.preventDefault();var n=e.data.context,o=$(this).attr("data-hook"),s=n.behaviorMap[o.split("|")[1]||"pop"];if(r.Cookie.get(t.tokenKey)){var a=s?n.windowDefaultSize:"",i="_self"===s?s:"LaunchIfAuthHook",l=$(this).attr("href");return l=l||$(this).data("href"),window.open(l,i,a),this}$("[data-widget=login]").modal("show")},onTriggerHookClick:function(e){var t=$(this).closest("[data-js=card]"),n=$(this).attr("data-hook"),r=n.split("|")[1],o=t.find("[data-js="+r+"]");o.length&&o.trigger("click")},onThemeHookClick:function(e){e.preventDefault(),e.stopPropagation();var t=e.data.context;if(t.themingOngoing)return t;if(!Pt.Themes)return t;t.themingOngoing=!0;var n=$("[data-js=css-reference]"),o=r.Cookie.get("theme")||"default",s=n.clone();"default"===o?(s.attr("href",Pt.Themes.light),r.Cookie.set({name:"theme",value:"light"})):(s.attr("href",Pt.Themes["default"]),r.Cookie.remove({name:"theme"})),n.after(s),s.on("load",function(){n.remove(),t.themingOngoing=!1})}}),_.Class("Pt.Hooks",new s)}(Pt.Settings,Pt.Config,Pt.Helpers,Pt.Managers,_.clone(Pt.Core.BindTrait)),function(){var e={web:[{route:"/",controller:"Pt.Controllers.HomeController@init"},{route:"/downloads",controller:"Pt.Controllers.DownloadsController@init"},{route:"/maintenance/:page",controller:"Pt.Controllers.StaticPageController@maintenance"},{route:"/static/:page",controller:"Pt.Controllers.StaticPageController@init"},{route:"/slots/lobby/:clubs?",controller:"Pt.Controllers.SlotsController@init"},{route:"/slots/:clubs?",controller:"Pt.Controllers.SlotsController@init"},{route:"/casino/:clubs?",controller:"Pt.Controllers.CasinoController@init"},{route:"/promo/:category?",controller:"Pt.Controllers.PromoController@init"},{route:"/vip",controller:"Pt.Controllers.VipController@init"},{route:"/signup",controller:"Pt.Controllers.SignUpController@init"},{route:"/error/404",controller:"Pt.Controllers.BaseErrorController@error404"},{route:"*",controller:"Pt.Controllers.BaseErrorController@error404"}],funds:[{route:"/maintenance/:page",controller:"Pt.Controllers.StaticPageController@maintenance"},{route:"/funds",controller:"Pt.Controllers.FundsController@init"},{route:"/funds/fund-transfer",controller:"Pt.Controllers.FundTransferController@init"},{route:"/funds/deposit/:methodId?",controller:"Pt.Controllers.DepositController@init"},{route:"/funds/withdrawal/:method?",controller:"Pt.Controllers.WithdrawalController@init"},{route:"/funds/history/:type",controller:"Pt.Controllers.HistoryController@init"},{route:"/funds/freebet",controller:"Pt.Controllers.FreebetController@init"},{route:"/funds/rebate",controller:"Pt.Controllers.RebateController@init"},{route:"*",controller:"Pt.Controllers.BaseErrorController@error404"}],profile:[{route:"/profile",controller:"Pt.Controllers.ProfileController@init"},{route:"/profile/edit",controller:"Pt.Controllers.MemberController@init"},{route:"/profile/delivery-address",controller:"Pt.Controllers.DeliveryAddressController@init"},{route:"/profile/change-password",controller:"Pt.Controllers.PasswordController@init"},{route:"/profile/bank-details",controller:"Pt.Controllers.BankDetailsController@init"},{route:"/profile/private-messages/:module?/:messageId?",controller:"Pt.Controllers.PrivateMessageController@init"},{route:"*",controller:"Pt.Controllers.BaseErrorController@error404"}]};_.Class("Pt.Routes",e)}(),function(e,t,n,r,o,s,a,i,l,c,u,d,f,p,m){"use strict";function h(){}t.Class("Pt.BaseBootstrap",h),h.prototype={boot:function(){m.start(),this.manageSubscriptions(),this.bootHooks(),c.get("lang")||c.set({name:"lang",value:"zh-hans"});var e=this,t=n.defer(),r=n.all([l.init()]);return r.then(function(){e.bootClasses(),e.setConfigurations(),e.bootWindowEvents(),t.resolve(!0)}),r.fail(function(){void 0}),t.promise},bootClasses:function(){Pt.Widgets.Header.activate(),Pt.Widgets.Navigation.init(),e(".chat-fab").length&&Pt.Widgets.Chat.init(),Pt.Widgets.Language.init(),Pt.Widgets.Notifications.init(),r.member.isLoggedIn||Pt.Widgets.Login.init()},bootHooks:function(){Pt.Hooks.init()},bootWindowEvents:function(){e(window).on("orientationchange",function(e){s.publish(s.getChannel("orientationChanged"),e)})},setConfigurations:function(){d.extend(d.validators.datetime,{parse:function(e,t){return+f.utc(e)},format:function(e,t){var n=t.dateOnly?"YYYY-MM-DD":"YYYY-MM-DD hh:mm:ss";return f.utc(e).format(n)}}),t.mixin({include:function(e,t){return t=t[0],l.get(e,t)}})},manageSubscriptions:function(){s.subscribe(s.getChannel("memberUnauthorized"),function(){p.error(t.trans("errors.session_expired_notification"),0)}),s.subscribe(s.getChannel("requestTimeout"),function(e){var n=["/api/v2/announcements"];return t.contains(n,t.parseUrl(e.url,"pathname"))?this:void p.error(t.trans("errors.request_timeout_notification"),0)})}}}(jQuery,_,Q,Pt.Settings,Pt.Config,Pt.Managers.Broadcaster,Pt.Managers.HttpClient,Pt.Managers.Cache,Pt.Managers.Template,Pt.Managers.Cookie,Pt.Services.Members,validate,moment,Pt.Helpers.Notify,Pt.Helpers.Nprogress),function(e){"use strict";function t(){function t(){e.call(this)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_.extend(t.prototype,{}),new t}_.Class("Pt.Bootstrap",t)}(Pt.BaseBootstrap),$(document).ready(function(){var e=new Pt.Bootstrap,t=e.boot();t.then(function(){try{Pt.Managers.Router.add(Pt.Routes[Pt.Settings.module])}catch(e){void 0,Pt.Settings.app_debugger&&Pt.Helpers.Notify.error("Javascript Error: <br/><br/>"+e.message+"<br/><br/>"+e.stack,0)}}),addToHomescreen({maxDisplayCount:10,lifespan:60})});